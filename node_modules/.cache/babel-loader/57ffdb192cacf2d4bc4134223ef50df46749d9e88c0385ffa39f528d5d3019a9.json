{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andre\\\\dlv-lite-bot\\\\dlb-lite-bot\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport CryptoJS from 'crypto-js'; // For AES encryption\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [tg, setTg] = useState(null);\n  const [devMode, setDevMode] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [biometricToken, setBiometricToken] = useState('');\n  const [assets, setAssets] = useState([]);\n  const [newAsset, setNewAsset] = useState({\n    type: '',\n    details: '',\n    notes: ''\n  });\n  const [editingIndex, setEditingIndex] = useState(-1);\n  const [lastAction, setLastAction] = useState('');\n  const [lastError, setLastError] = useState('');\n\n  // Helper to show alerts using Telegram SDK when available, or window.alert when not\n  const showAlert = msg => {\n    // Try Telegram showAlert, but fall back to window.alert and swallow WebAppMethodUnsupported\n    try {\n      if (tg && typeof tg.showAlert === 'function') {\n        try {\n          tg.showAlert(msg);\n          return;\n        } catch (e) {\n          console.warn('tg.showAlert failed, falling back to window.alert', e);\n        }\n      }\n    } catch (e) {\n      console.warn('showAlert wrapper unexpected error', e);\n    }\n    try {\n      window.alert(msg);\n    } catch (e) {\n      console.error('window.alert failed', e);\n    }\n  };\n\n  // Safe wrappers for SecureStorage (fallback to localStorage if SecureStorage is unsupported)\n  const secureGetItem = (key, cb) => {\n    try {\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.getItem === 'function') {\n        try {\n          return tg.SecureStorage.getItem(key, cb);\n        } catch (e) {\n          console.warn('tg.SecureStorage.getItem threw, falling back to localStorage', e);\n        }\n      }\n    } catch (e) {\n      console.warn('secureGetItem unexpected error', e);\n    }\n    // async to mimic callback\n    setTimeout(() => {\n      try {\n        const v = localStorage.getItem(key);\n        cb(null, v);\n      } catch (err) {\n        cb(err);\n      }\n    }, 0);\n  };\n  const secureSetItem = (key, value, cb) => {\n    try {\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.setItem === 'function') {\n        try {\n          return tg.SecureStorage.setItem(key, value, cb);\n        } catch (e) {\n          console.warn('tg.SecureStorage.setItem threw, falling back to localStorage', e);\n        }\n      }\n    } catch (e) {\n      console.warn('secureSetItem unexpected error', e);\n    }\n    setTimeout(() => {\n      try {\n        localStorage.setItem(key, value);\n        cb(null, true);\n      } catch (err) {\n        cb(err, false);\n      }\n    }, 0);\n  };\n\n  // Promise-based wrappers around secureGetItem / secureSetItem for easier async flows\n  const secureGetItemAsync = key => new Promise((resolve, reject) => {\n    try {\n      secureGetItem(key, (err, value) => {\n        if (err) return reject(err);\n        resolve(value);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n  const secureSetItemAsync = (key, value) => new Promise((resolve, reject) => {\n    try {\n      secureSetItem(key, value, (err, ok) => {\n        if (err) return reject(err);\n        resolve(ok);\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n\n  // Master key stored in SecureStorage (device-bound). Generate on first successful auth.\n  const MASTER_KEY_KEY = 'dlv_master_key';\n  const ensureMasterKey = async () => {\n    try {\n      const existing = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\n      if (existing) return existing;\n      // generate 32 bytes random hex-ish string\n      const rand = CryptoJS.lib.WordArray.random(32).toString();\n      await secureSetItemAsync(MASTER_KEY_KEY, rand);\n      return rand;\n    } catch (e) {\n      console.error('ensureMasterKey error', e);\n      throw e;\n    }\n  };\n  const getMasterKey = async () => {\n    const mk = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\n    return mk || null;\n  };\n  const encryptWithMasterKey = async data => {\n    const mk = await getMasterKey();\n    if (!mk) throw new Error('master key not available');\n    return CryptoJS.AES.encrypt(JSON.stringify(data), mk).toString();\n  };\n  const decryptWithMasterKey = async encrypted => {\n    const mk = await getMasterKey();\n    if (!mk) throw new Error('master key not available');\n    const bytes = CryptoJS.AES.decrypt(encrypted, mk);\n    const txt = bytes.toString(CryptoJS.enc.Utf8);\n    return txt ? JSON.parse(txt) : null;\n  };\n  const safeHaptic = type => {\n    try {\n      tg && tg.HapticFeedback && typeof tg.HapticFeedback.notificationOccurred === 'function' && tg.HapticFeedback.notificationOccurred(type);\n    } catch (e) {\n      console.warn('HapticFeedback failed', e);\n    }\n  };\n  const safeClose = () => {\n    try {\n      tg && typeof tg.close === 'function' && tg.close();\n    } catch (e) {\n      console.warn('tg.close failed', e);\n    }\n  };\n\n  // Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\n  const createFakeTelegram = () => {\n    const handlers = {};\n    return {\n      themeParams: {\n        bg_color: '#ffffff',\n        text_color: '#000000'\n      },\n      ready: () => {},\n      expand: () => {},\n      onEvent: (name, cb) => {\n        handlers[name] = cb;\n      },\n      triggerEvent: (name, payload) => {\n        if (handlers[name]) handlers[name](payload);\n      },\n      showAlert: text => window.alert(text),\n      close: () => {},\n      HapticFeedback: {\n        notificationOccurred: t => console.log('haptic', t)\n      },\n      SecureStorage: {\n        getItem: (key, cb) => {\n          try {\n            const v = localStorage.getItem(key);\n            cb(null, v);\n          } catch (e) {\n            cb(e);\n          }\n        },\n        setItem: (key, value, cb) => {\n          try {\n            localStorage.setItem(key, value);\n            cb(null, true);\n          } catch (e) {\n            cb(e, false);\n          }\n        }\n      },\n      BiometricManager: {\n        isBiometricAvailable: true,\n        isAccessGranted: false,\n        init: cb => cb && cb(),\n        requestAccess: (opts, cb) => {\n          // Simulate user granting access in dev mode\n          setTimeout(() => cb && cb(true), 200);\n        },\n        authenticate: opts => {\n          // Simulate authentication success\n          setTimeout(() => {\n            const token = 'dev-biometric-token';\n            setIsAuthenticated(true);\n            setBiometricToken(token);\n            loadAssetsWithToken(token);\n          }, 200);\n        }\n      }\n    };\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    var _window$Telegram;\n    // If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\n    try {\n      const params = new URLSearchParams(window.location.search);\n      if (params.get('dev') === '1') setDevMode(true);\n    } catch (e) {\n      // ignore\n    }\n    const telegram = (_window$Telegram = window.Telegram) === null || _window$Telegram === void 0 ? void 0 : _window$Telegram.WebApp;\n    if (telegram) {\n      setTg(telegram);\n      telegram.ready(); // Hide loading spinner\n      telegram.expand(); // Full height\n      // Theme adaptation\n      document.body.style.backgroundColor = telegram.themeParams.bg_color;\n      telegram.onEvent('themeChanged', () => {\n        document.body.style.backgroundColor = telegram.themeParams.bg_color;\n      });\n\n      // Validate initData (send to backend for HMAC check)\n      validateInitData(telegram.initData);\n\n      // Biometric setup\n      const biometric = telegram.BiometricManager;\n      biometric.init(() => {\n        if (biometric.isBiometricAvailable && !biometric.isAccessGranted) {\n          biometric.requestAccess({\n            reason: 'Secure your asset vault'\n          }, granted => {\n            if (granted) {\n              authenticateBiometrics();\n            }\n          });\n        } else if (biometric.isAccessGranted) {\n          authenticateBiometrics();\n        }\n      });\n      telegram.onEvent('biometricAuthRequested', event => {\n        setIsAuthenticated(event.isAuthenticated);\n        if (event.isAuthenticated) {\n          setBiometricToken(event.biometricToken);\n          // Load assets after auth\n          loadAssets();\n        }\n      });\n    }\n  }, []);\n\n  // When devMode is toggled on in a regular browser, create fake Telegram object\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    if (devMode && !tg) {\n      const fake = createFakeTelegram();\n      setTg(fake);\n      // simulate immediate auth in dev mode for convenience\n      const token = 'dev-biometric-token';\n      setIsAuthenticated(true);\n      setBiometricToken(token);\n      // load assets from localStorage\n      loadAssetsWithToken(token);\n    }\n  }, [devMode]);\n\n  // Backend validation function (call your Vercel API)\n  const validateInitData = async initData => {\n    if (!tg) return; // Guard for local testing\n    try {\n      const response = await fetch('/api/validate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          initData\n        })\n      });\n      const {\n        valid\n      } = await response.json();\n      if (!valid) {\n        showAlert('Invalid session! Please restart.');\n        safeClose();\n      }\n    } catch (error) {\n      console.error('Validation failed', error);\n      showAlert('Error validating session.');\n    }\n  };\n\n  // Function to authenticate\n  const authenticateBiometrics = () => {\n    var _tg$BiometricManager;\n    tg === null || tg === void 0 ? void 0 : (_tg$BiometricManager = tg.BiometricManager) === null || _tg$BiometricManager === void 0 ? void 0 : _tg$BiometricManager.authenticate({\n      reason: 'Unlock your vault'\n    });\n  };\n\n  // Encryption function\n  const encryptData = (data, key = biometricToken) => {\n    return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();\n  };\n\n  // Decryption\n  const decryptData = (encrypted, key = biometricToken) => {\n    const bytes = CryptoJS.AES.decrypt(encrypted, key);\n    return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n  };\n\n  // Load assets from SecureStorage using current biometric key\n  const loadAssets = async () => {\n    try {\n      const encrypted = await secureGetItemAsync('dlv_assets').catch(() => null);\n      if (!encrypted) {\n        setAssets([]);\n        return;\n      }\n      const decrypted = await decryptWithMasterKey(encrypted);\n      setAssets(decrypted || []);\n    } catch (e) {\n      console.error('loadAssets error', e);\n      // If master key not available, assets cannot be decrypted — show empty\n      setAssets([]);\n    }\n  };\n\n  // Helper kept for compatibility but now loads using master key (dev mode will generate master key)\n  const loadAssetsWithToken = async _token => {\n    // For MVP we will create/use a masterKey instead of token-based encryption\n    try {\n      await ensureMasterKey();\n    } catch (e) {\n      console.warn('Could not ensure master key in dev mode', e);\n    }\n    await loadAssets();\n  };\n\n  // Save assets\n  const saveAsset = () => {\n    setLastError('');\n    setLastAction('saveAsset');\n    if (!tg) {\n      setLastError('Telegram API not available');\n      return showAlert('Telegram API not available');\n    }\n    if (assets.length >= 10) {\n      // Limit to 10\n      setLastError('Maximum assets reached');\n      return showAlert('Maximum 10 assets allowed');\n    }\n    if (editingIndex >= 0) {\n      // save edit\n      const updatedAssets = assets.map((a, i) => i === editingIndex ? newAsset : a);\n      setEditingIndex(-1);\n      try {\n        // persist using master key\n        setAssets(updatedAssets);\n        setNewAsset({\n          type: '',\n          details: '',\n          notes: ''\n        });\n        (async () => {\n          try {\n            const mk = await getMasterKey();\n            if (!mk) throw new Error('master key missing');\n            const encrypted = await encryptWithMasterKey(updatedAssets);\n            await secureSetItemAsync('dlv_assets', encrypted);\n            safeHaptic('success');\n            showAlert('Asset saved!');\n          } catch (err) {\n            console.error('SecureStorage.setItem failed', err);\n            setLastError(err ? String(err) : 'setItem returned false');\n            setAssets(assets);\n            showAlert('Failed to save asset');\n          }\n        })();\n      } catch (ex) {\n        console.error('saveAsset (edit) exception', ex);\n        setLastError(String(ex));\n        setAssets(assets);\n        showAlert('Failed to save asset (exception)');\n      }\n      return;\n    }\n    const updatedAssets = [...assets, newAsset];\n    // optimistic update so UI is responsive\n    try {\n      setAssets(updatedAssets);\n      setNewAsset({\n        type: '',\n        details: '',\n        notes: ''\n      });\n      (async () => {\n        try {\n          const mk = await getMasterKey();\n          if (!mk) throw new Error('master key missing');\n          const encrypted = await encryptWithMasterKey(updatedAssets);\n          await secureSetItemAsync('dlv_assets', encrypted);\n          safeHaptic('success');\n          showAlert('Asset saved!');\n        } catch (err) {\n          console.error('SecureStorage.setItem failed', err);\n          setLastError(err ? String(err) : 'setItem returned false');\n          // revert optimistic update\n          setAssets(assets);\n          showAlert('Failed to save asset');\n        }\n      })();\n    } catch (ex) {\n      console.error('saveAsset exception', ex);\n      setLastError(String(ex));\n      setAssets(assets);\n      showAlert('Failed to save asset (exception)');\n    }\n  };\n\n  // Delete asset\n  const deleteAsset = index => {\n    setLastError('');\n    setLastAction('deleteAsset');\n    if (!tg) {\n      setLastError('Telegram API not available');\n      return showAlert('Telegram API not available');\n    }\n    const updatedAssets = assets.filter((_, i) => i !== index);\n    try {\n      // optimistic\n      const prior = assets;\n      setAssets(updatedAssets);\n      (async () => {\n        try {\n          const mk = await getMasterKey();\n          if (!mk) throw new Error('master key missing');\n          const encrypted = await encryptWithMasterKey(updatedAssets);\n          await secureSetItemAsync('dlv_assets', encrypted);\n          showAlert('Asset deleted!');\n        } catch (err) {\n          console.error('SecureStorage.setItem failed', err);\n          setLastError(err ? String(err) : 'setItem returned false');\n          // revert\n          setAssets(prior);\n          showAlert('Failed to delete asset');\n        }\n      })();\n    } catch (ex) {\n      console.error('deleteAsset exception', ex);\n      setLastError(String(ex));\n      showAlert('Failed to delete asset (exception)');\n    }\n  };\n  const startEdit = index => {\n    setEditingIndex(index);\n    setNewAsset(assets[index]);\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const cancelEdit = () => {\n    setEditingIndex(-1);\n    setNewAsset({\n      type: '',\n      details: '',\n      notes: ''\n    });\n  };\n\n  // If Telegram is not available, show a small UI to enable dev mode for local testing\n  if (!tg) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Lite Digital Legacy Vault\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: devMode,\n          onChange: e => setDevMode(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this), \" Enable Dev Mode\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#666'\n        },\n        children: \"Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      color: tg.themeParams.text_color,\n      backgroundColor: tg.themeParams.bg_color\n    },\n    children: [devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff3bf',\n        color: '#664d03',\n        padding: '8px 12px',\n        borderRadius: 6,\n        marginBottom: 12,\n        border: '1px solid #ffe58f'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Dev Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 11\n      }, this), \" \\u2014 running with a simulated Telegram API. Data is stored in localStorage.\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setDevMode(false),\n        style: {\n          float: 'right',\n          background: 'transparent',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 9\n    }, this), devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#f6f8fa',\n        border: '1px solid #e1e4e8',\n        padding: 12,\n        borderRadius: 6,\n        marginBottom: 12,\n        fontSize: 13\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Debug\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              // simulate biometric auth in dev mode\n              const token = 'dev-biometric-token';\n              setIsAuthenticated(true);\n              setBiometricToken(token);\n              loadAssetsWithToken(token);\n            },\n            style: {\n              marginRight: 8\n            },\n            children: \"Simulate Auth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: 'pre-wrap',\n          marginTop: 8\n        },\n        children: JSON.stringify({\n          devMode: !!devMode,\n          tg: !!tg,\n          isAuthenticated,\n          biometricToken: biometricToken ? '[redacted]' : '',\n          assetsLength: assets.length,\n          lastAction,\n          lastError\n        }, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Lite Digital Legacy Vault\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Store and retrieve asset info securely (no passwords/seed phrases).\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 7\n    }, this), isAuthenticated || devMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add New Asset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newAsset.type,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          type: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Asset Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"crypto\",\n          children: \"Crypto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"domain\",\n          children: \"Domain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"other\",\n          children: \"Other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newAsset.details,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          details: e.target.value\n        }),\n        placeholder: \"Details (e.g., wallet address)\",\n        style: {\n          width: '100%',\n          margin: '10px 0',\n          padding: '8px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: newAsset.notes,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          notes: e.target.value\n        }),\n        placeholder: \"Notes\",\n        style: {\n          width: '100%',\n          margin: '10px 0',\n          padding: '8px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8,\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveAsset,\n          style: {\n            padding: '10px 20px',\n            margin: '10px 0'\n          },\n          children: editingIndex >= 0 ? 'Save Changes' : 'Add Asset'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 13\n        }, this), editingIndex >= 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: cancelEdit,\n          style: {\n            padding: '10px 20px',\n            margin: '10px 0'\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your Assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0\n        },\n        children: assets.map((asset, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            margin: '10px 0',\n            padding: '10px',\n            border: '1px solid #ccc',\n            borderRadius: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [asset.type, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 17\n          }, this), \" \", asset.details, asset.notes && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Notes: \", asset.notes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '5px',\n              display: 'flex',\n              gap: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => startEdit(i),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 524,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => deleteAsset(i),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Authenticate with biometrics to access your vault.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            try {\n              // If BiometricManager exists, ensure access is requested first when needed\n              if (tg !== null && tg !== void 0 && tg.BiometricManager) {\n                const bm = tg.BiometricManager;\n                if (!bm.isAccessGranted && typeof bm.requestAccess === 'function') {\n                  bm.requestAccess({\n                    reason: 'Unlock your vault'\n                  }, granted => {\n                    if (granted) {\n                      authenticateBiometrics();\n                    } else {\n                      showAlert('Biometric access was not granted.');\n                    }\n                  });\n                  return;\n                }\n                // Otherwise call authenticate directly\n                authenticateBiometrics();\n                return;\n              }\n              showAlert('Biometric auth not available in this Telegram client. Try updating Telegram or enable Dev Mode to test.');\n            } catch (e) {\n              console.error('Authenticate button error', e);\n              showAlert('Failed to start biometric authentication.');\n            }\n          },\n          children: \"Authenticate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 532,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 464,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"I+oK/XYQgl6nI2KX+HbrPDz/psg=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","CryptoJS","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","tg","setTg","devMode","setDevMode","isAuthenticated","setIsAuthenticated","biometricToken","setBiometricToken","assets","setAssets","newAsset","setNewAsset","type","details","notes","editingIndex","setEditingIndex","lastAction","setLastAction","lastError","setLastError","showAlert","msg","e","console","warn","window","alert","error","secureGetItem","key","cb","SecureStorage","getItem","setTimeout","v","localStorage","err","secureSetItem","value","setItem","secureGetItemAsync","Promise","resolve","reject","secureSetItemAsync","ok","MASTER_KEY_KEY","ensureMasterKey","existing","catch","rand","lib","WordArray","random","toString","getMasterKey","mk","encryptWithMasterKey","data","Error","AES","encrypt","JSON","stringify","decryptWithMasterKey","encrypted","bytes","decrypt","txt","enc","Utf8","parse","safeHaptic","HapticFeedback","notificationOccurred","safeClose","close","createFakeTelegram","handlers","themeParams","bg_color","text_color","ready","expand","onEvent","name","triggerEvent","payload","text","t","log","BiometricManager","isBiometricAvailable","isAccessGranted","init","requestAccess","opts","authenticate","token","loadAssetsWithToken","_window$Telegram","params","URLSearchParams","location","search","get","telegram","Telegram","WebApp","document","body","style","backgroundColor","validateInitData","initData","biometric","reason","granted","authenticateBiometrics","event","loadAssets","fake","response","fetch","method","headers","valid","json","_tg$BiometricManager","encryptData","decryptData","decrypted","_token","saveAsset","length","updatedAssets","map","a","i","String","ex","deleteAsset","index","filter","_","prior","startEdit","scrollTo","top","behavior","cancelEdit","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","display","marginBottom","checked","onChange","target","color","background","borderRadius","border","onClick","float","cursor","fontSize","justifyContent","alignItems","marginRight","whiteSpace","marginTop","assetsLength","placeholder","width","margin","gap","listStyle","asset","bm","_c","$RefreshReg$"],"sources":["C:/Users/Andre/dlv-lite-bot/dlb-lite-bot/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CryptoJS from 'crypto-js'; // For AES encryption\r\n\r\nfunction App() {\r\n  const [tg, setTg] = useState(null);\r\n  const [devMode, setDevMode] = useState(false);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [biometricToken, setBiometricToken] = useState('');\r\n  const [assets, setAssets] = useState([]);\r\n  const [newAsset, setNewAsset] = useState({ type: '', details: '', notes: '' });\r\n  const [editingIndex, setEditingIndex] = useState(-1);\r\n  const [lastAction, setLastAction] = useState('');\r\n  const [lastError, setLastError] = useState('');\r\n\r\n  // Helper to show alerts using Telegram SDK when available, or window.alert when not\r\n  const showAlert = (msg) => {\r\n    // Try Telegram showAlert, but fall back to window.alert and swallow WebAppMethodUnsupported\r\n    try {\r\n      if (tg && typeof tg.showAlert === 'function') {\r\n        try {\r\n          tg.showAlert(msg);\r\n          return;\r\n        } catch (e) {\r\n          console.warn('tg.showAlert failed, falling back to window.alert', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('showAlert wrapper unexpected error', e);\r\n    }\r\n    try { window.alert(msg); } catch (e) { console.error('window.alert failed', e); }\r\n  };\r\n\r\n  // Safe wrappers for SecureStorage (fallback to localStorage if SecureStorage is unsupported)\r\n  const secureGetItem = (key, cb) => {\r\n    try {\r\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.getItem === 'function') {\r\n        try {\r\n          return tg.SecureStorage.getItem(key, cb);\r\n        } catch (e) {\r\n          console.warn('tg.SecureStorage.getItem threw, falling back to localStorage', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('secureGetItem unexpected error', e);\r\n    }\r\n    // async to mimic callback\r\n    setTimeout(() => {\r\n      try {\r\n        const v = localStorage.getItem(key);\r\n        cb(null, v);\r\n      } catch (err) {\r\n        cb(err);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  const secureSetItem = (key, value, cb) => {\r\n    try {\r\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.setItem === 'function') {\r\n        try {\r\n          return tg.SecureStorage.setItem(key, value, cb);\r\n        } catch (e) {\r\n          console.warn('tg.SecureStorage.setItem threw, falling back to localStorage', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('secureSetItem unexpected error', e);\r\n    }\r\n    setTimeout(() => {\r\n      try {\r\n        localStorage.setItem(key, value);\r\n        cb(null, true);\r\n      } catch (err) {\r\n        cb(err, false);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Promise-based wrappers around secureGetItem / secureSetItem for easier async flows\r\n  const secureGetItemAsync = (key) => new Promise((resolve, reject) => {\r\n    try {\r\n      secureGetItem(key, (err, value) => {\r\n        if (err) return reject(err);\r\n        resolve(value);\r\n      });\r\n    } catch (e) { reject(e); }\r\n  });\r\n\r\n  const secureSetItemAsync = (key, value) => new Promise((resolve, reject) => {\r\n    try {\r\n      secureSetItem(key, value, (err, ok) => {\r\n        if (err) return reject(err);\r\n        resolve(ok);\r\n      });\r\n    } catch (e) { reject(e); }\r\n  });\r\n\r\n  // Master key stored in SecureStorage (device-bound). Generate on first successful auth.\r\n  const MASTER_KEY_KEY = 'dlv_master_key';\r\n\r\n  const ensureMasterKey = async () => {\r\n    try {\r\n      const existing = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\r\n      if (existing) return existing;\r\n      // generate 32 bytes random hex-ish string\r\n      const rand = CryptoJS.lib.WordArray.random(32).toString();\r\n      await secureSetItemAsync(MASTER_KEY_KEY, rand);\r\n      return rand;\r\n    } catch (e) {\r\n      console.error('ensureMasterKey error', e);\r\n      throw e;\r\n    }\r\n  };\r\n\r\n  const getMasterKey = async () => {\r\n    const mk = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\r\n    return mk || null;\r\n  };\r\n\r\n  const encryptWithMasterKey = async (data) => {\r\n    const mk = await getMasterKey();\r\n    if (!mk) throw new Error('master key not available');\r\n    return CryptoJS.AES.encrypt(JSON.stringify(data), mk).toString();\r\n  };\r\n\r\n  const decryptWithMasterKey = async (encrypted) => {\r\n    const mk = await getMasterKey();\r\n    if (!mk) throw new Error('master key not available');\r\n    const bytes = CryptoJS.AES.decrypt(encrypted, mk);\r\n    const txt = bytes.toString(CryptoJS.enc.Utf8);\r\n    return txt ? JSON.parse(txt) : null;\r\n  };\r\n\r\n  const safeHaptic = (type) => {\r\n    try {\r\n      tg && tg.HapticFeedback && typeof tg.HapticFeedback.notificationOccurred === 'function' && tg.HapticFeedback.notificationOccurred(type);\r\n    } catch (e) {\r\n      console.warn('HapticFeedback failed', e);\r\n    }\r\n  };\r\n\r\n  const safeClose = () => {\r\n    try { tg && typeof tg.close === 'function' && tg.close(); } catch (e) { console.warn('tg.close failed', e); }\r\n  };\r\n\r\n  // Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\r\n  const createFakeTelegram = () => {\r\n    const handlers = {};\r\n    return {\r\n      themeParams: { bg_color: '#ffffff', text_color: '#000000' },\r\n      ready: () => {},\r\n      expand: () => {},\r\n      onEvent: (name, cb) => {\r\n        handlers[name] = cb;\r\n      },\r\n      triggerEvent: (name, payload) => {\r\n        if (handlers[name]) handlers[name](payload);\r\n      },\r\n      showAlert: (text) => window.alert(text),\r\n      close: () => {},\r\n      HapticFeedback: { notificationOccurred: (t) => console.log('haptic', t) },\r\n      SecureStorage: {\r\n        getItem: (key, cb) => {\r\n          try {\r\n            const v = localStorage.getItem(key);\r\n            cb(null, v);\r\n          } catch (e) {\r\n            cb(e);\r\n          }\r\n        },\r\n        setItem: (key, value, cb) => {\r\n          try {\r\n            localStorage.setItem(key, value);\r\n            cb(null, true);\r\n          } catch (e) {\r\n            cb(e, false);\r\n          }\r\n        },\r\n      },\r\n      BiometricManager: {\r\n        isBiometricAvailable: true,\r\n        isAccessGranted: false,\r\n        init: (cb) => cb && cb(),\r\n        requestAccess: (opts, cb) => {\r\n          // Simulate user granting access in dev mode\r\n          setTimeout(() => cb && cb(true), 200);\r\n        },\r\n        authenticate: (opts) => {\r\n          // Simulate authentication success\r\n          setTimeout(() => {\r\n            const token = 'dev-biometric-token';\r\n            setIsAuthenticated(true);\r\n            setBiometricToken(token);\r\n            loadAssetsWithToken(token);\r\n          }, 200);\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    // If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\r\n    try {\r\n      const params = new URLSearchParams(window.location.search);\r\n      if (params.get('dev') === '1') setDevMode(true);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n\r\n    const telegram = window.Telegram?.WebApp;\r\n    if (telegram) {\r\n      setTg(telegram);\r\n      telegram.ready(); // Hide loading spinner\r\n      telegram.expand(); // Full height\r\n      // Theme adaptation\r\n      document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      telegram.onEvent('themeChanged', () => {\r\n        document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      });\r\n\r\n      // Validate initData (send to backend for HMAC check)\r\n      validateInitData(telegram.initData);\r\n\r\n      // Biometric setup\r\n      const biometric = telegram.BiometricManager;\r\n      biometric.init(() => {\r\n        if (biometric.isBiometricAvailable && !biometric.isAccessGranted) {\r\n          biometric.requestAccess({ reason: 'Secure your asset vault' }, (granted) => {\r\n            if (granted) {\r\n              authenticateBiometrics();\r\n            }\r\n          });\r\n        } else if (biometric.isAccessGranted) {\r\n          authenticateBiometrics();\r\n        }\r\n      });\r\n\r\n      telegram.onEvent('biometricAuthRequested', (event) => {\r\n        setIsAuthenticated(event.isAuthenticated);\r\n        if (event.isAuthenticated) {\r\n          setBiometricToken(event.biometricToken);\r\n          // Load assets after auth\r\n          loadAssets();\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // When devMode is toggled on in a regular browser, create fake Telegram object\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (devMode && !tg) {\r\n      const fake = createFakeTelegram();\r\n      setTg(fake);\r\n      // simulate immediate auth in dev mode for convenience\r\n      const token = 'dev-biometric-token';\r\n      setIsAuthenticated(true);\r\n      setBiometricToken(token);\r\n      // load assets from localStorage\r\n      loadAssetsWithToken(token);\r\n    }\r\n  }, [devMode]);\r\n\r\n  // Backend validation function (call your Vercel API)\r\n  const validateInitData = async (initData) => {\r\n    if (!tg) return; // Guard for local testing\r\n    try {\r\n      const response = await fetch('/api/validate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ initData }),\r\n      });\r\n      const { valid } = await response.json();\r\n      if (!valid) {\r\n        showAlert('Invalid session! Please restart.');\r\n        safeClose();\r\n      }\r\n    } catch (error) {\r\n      console.error('Validation failed', error);\r\n      showAlert('Error validating session.');\r\n    }\r\n  };\r\n\r\n  // Function to authenticate\r\n  const authenticateBiometrics = () => {\r\n    tg?.BiometricManager?.authenticate({ reason: 'Unlock your vault' });\r\n  };\r\n\r\n  // Encryption function\r\n  const encryptData = (data, key = biometricToken) => {\r\n    return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();\r\n  };\r\n\r\n  // Decryption\r\n  const decryptData = (encrypted, key = biometricToken) => {\r\n    const bytes = CryptoJS.AES.decrypt(encrypted, key);\r\n    return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n  };\r\n\r\n  // Load assets from SecureStorage using current biometric key\r\n  const loadAssets = async () => {\r\n    try {\r\n      const encrypted = await secureGetItemAsync('dlv_assets').catch(() => null);\r\n      if (!encrypted) {\r\n        setAssets([]);\r\n        return;\r\n      }\r\n      const decrypted = await decryptWithMasterKey(encrypted);\r\n      setAssets(decrypted || []);\r\n    } catch (e) {\r\n      console.error('loadAssets error', e);\r\n      // If master key not available, assets cannot be decrypted — show empty\r\n      setAssets([]);\r\n    }\r\n  };\r\n\r\n  // Helper kept for compatibility but now loads using master key (dev mode will generate master key)\r\n  const loadAssetsWithToken = async (_token) => {\r\n    // For MVP we will create/use a masterKey instead of token-based encryption\r\n    try {\r\n      await ensureMasterKey();\r\n    } catch (e) {\r\n      console.warn('Could not ensure master key in dev mode', e);\r\n    }\r\n    await loadAssets();\r\n  };\r\n\r\n  // Save assets\r\n  const saveAsset = () => {\r\n    setLastError('');\r\n    setLastAction('saveAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    if (assets.length >= 10) { // Limit to 10\r\n      setLastError('Maximum assets reached');\r\n      return showAlert('Maximum 10 assets allowed');\r\n    }\r\n    if (editingIndex >= 0) {\r\n      // save edit\r\n      const updatedAssets = assets.map((a, i) => i === editingIndex ? newAsset : a);\r\n      setEditingIndex(-1);\r\n      try {\r\n        // persist using master key\r\n        setAssets(updatedAssets);\r\n        setNewAsset({ type: '', details: '', notes: '' });\r\n        (async () => {\r\n          try {\r\n            const mk = await getMasterKey();\r\n            if (!mk) throw new Error('master key missing');\r\n            const encrypted = await encryptWithMasterKey(updatedAssets);\r\n            await secureSetItemAsync('dlv_assets', encrypted);\r\n            safeHaptic('success');\r\n            showAlert('Asset saved!');\r\n          } catch (err) {\r\n            console.error('SecureStorage.setItem failed', err);\r\n            setLastError(err ? String(err) : 'setItem returned false');\r\n            setAssets(assets);\r\n            showAlert('Failed to save asset');\r\n          }\r\n        })();\r\n      } catch (ex) {\r\n        console.error('saveAsset (edit) exception', ex);\r\n        setLastError(String(ex));\r\n        setAssets(assets);\r\n        showAlert('Failed to save asset (exception)');\r\n      }\r\n      return;\r\n    }\r\n    const updatedAssets = [...assets, newAsset];\r\n    // optimistic update so UI is responsive\r\n    try {\r\n      setAssets(updatedAssets);\r\n      setNewAsset({ type: '', details: '', notes: '' });\r\n      (async () => {\r\n        try {\r\n          const mk = await getMasterKey();\r\n          if (!mk) throw new Error('master key missing');\r\n          const encrypted = await encryptWithMasterKey(updatedAssets);\r\n          await secureSetItemAsync('dlv_assets', encrypted);\r\n          safeHaptic('success');\r\n          showAlert('Asset saved!');\r\n        } catch (err) {\r\n          console.error('SecureStorage.setItem failed', err);\r\n          setLastError(err ? String(err) : 'setItem returned false');\r\n          // revert optimistic update\r\n          setAssets(assets);\r\n          showAlert('Failed to save asset');\r\n        }\r\n      })();\r\n    } catch (ex) {\r\n      console.error('saveAsset exception', ex);\r\n      setLastError(String(ex));\r\n      setAssets(assets);\r\n      showAlert('Failed to save asset (exception)');\r\n    }\r\n  };\r\n\r\n  // Delete asset\r\n  const deleteAsset = (index) => {\r\n    setLastError('');\r\n    setLastAction('deleteAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    const updatedAssets = assets.filter((_, i) => i !== index);\r\n    try {\r\n      // optimistic\r\n      const prior = assets;\r\n      setAssets(updatedAssets);\r\n      (async () => {\r\n        try {\r\n          const mk = await getMasterKey();\r\n          if (!mk) throw new Error('master key missing');\r\n          const encrypted = await encryptWithMasterKey(updatedAssets);\r\n          await secureSetItemAsync('dlv_assets', encrypted);\r\n          showAlert('Asset deleted!');\r\n        } catch (err) {\r\n          console.error('SecureStorage.setItem failed', err);\r\n          setLastError(err ? String(err) : 'setItem returned false');\r\n          // revert\r\n          setAssets(prior);\r\n          showAlert('Failed to delete asset');\r\n        }\r\n      })();\r\n    } catch (ex) {\r\n      console.error('deleteAsset exception', ex);\r\n      setLastError(String(ex));\r\n      showAlert('Failed to delete asset (exception)');\r\n    }\r\n  };\r\n\r\n  const startEdit = (index) => {\r\n    setEditingIndex(index);\r\n    setNewAsset(assets[index]);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingIndex(-1);\r\n    setNewAsset({ type: '', details: '', notes: '' });\r\n  };\r\n\r\n  // If Telegram is not available, show a small UI to enable dev mode for local testing\r\n  if (!tg) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h1>Lite Digital Legacy Vault</h1>\r\n        <p>Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.</p>\r\n        <label style={{ display: 'block', marginBottom: 10 }}>\r\n          <input type=\"checkbox\" checked={devMode} onChange={(e) => setDevMode(e.target.checked)} /> Enable Dev Mode\r\n        </label>\r\n        <p style={{ color: '#666' }}>\r\n          Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px', color: tg.themeParams.text_color, backgroundColor: tg.themeParams.bg_color }}>\r\n      {devMode && (\r\n        <div style={{ background: '#fff3bf', color: '#664d03', padding: '8px 12px', borderRadius: 6, marginBottom: 12, border: '1px solid #ffe58f' }}>\r\n          <strong>Dev Mode</strong> — running with a simulated Telegram API. Data is stored in localStorage.\r\n          <button onClick={() => setDevMode(false)} style={{ float: 'right', background: 'transparent', border: 'none', cursor: 'pointer' }}>Dismiss</button>\r\n        </div>\r\n      )}\r\n      {devMode && (\r\n        <div style={{ background: '#f6f8fa', border: '1px solid #e1e4e8', padding: 12, borderRadius: 6, marginBottom: 12, fontSize: 13 }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <strong>Debug</strong>\r\n            <div>\r\n              <button onClick={() => {\r\n                // simulate biometric auth in dev mode\r\n                const token = 'dev-biometric-token';\r\n                setIsAuthenticated(true);\r\n                setBiometricToken(token);\r\n                loadAssetsWithToken(token);\r\n              }} style={{ marginRight: 8 }}>Simulate Auth</button>\r\n            </div>\r\n          </div>\r\n          <pre style={{ whiteSpace: 'pre-wrap', marginTop: 8 }}>\r\n{JSON.stringify({ devMode: !!devMode, tg: !!tg, isAuthenticated, biometricToken: biometricToken ? '[redacted]' : '', assetsLength: assets.length, lastAction, lastError }, null, 2)}\r\n          </pre>\r\n        </div>\r\n      )}\r\n      <h1>Lite Digital Legacy Vault</h1>\r\n      <p>Store and retrieve asset info securely (no passwords/seed phrases).</p>\r\n  {(isAuthenticated || devMode) ? (\r\n        <>\r\n          <h2>Add New Asset</h2>\r\n          <select value={newAsset.type} onChange={(e) => setNewAsset({ ...newAsset, type: e.target.value })}>\r\n            <option value=\"\">Asset Type</option>\r\n            <option value=\"crypto\">Crypto</option>\r\n            <option value=\"domain\">Domain</option>\r\n            <option value=\"other\">Other</option>\r\n          </select>\r\n          <input\r\n            value={newAsset.details}\r\n            onChange={(e) => setNewAsset({ ...newAsset, details: e.target.value })}\r\n            placeholder=\"Details (e.g., wallet address)\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <textarea\r\n            value={newAsset.notes}\r\n            onChange={(e) => setNewAsset({ ...newAsset, notes: e.target.value })}\r\n            placeholder=\"Notes\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\r\n            <button onClick={saveAsset} style={{ padding: '10px 20px', margin: '10px 0' }}>{editingIndex >= 0 ? 'Save Changes' : 'Add Asset'}</button>\r\n            {editingIndex >= 0 && <button onClick={cancelEdit} style={{ padding: '10px 20px', margin: '10px 0' }}>Cancel</button>}\r\n          </div>\r\n          <h2>Your Assets</h2>\r\n          <ul style={{ listStyle: 'none', padding: 0 }}>\r\n            {assets.map((asset, i) => (\r\n              <li key={i} style={{ margin: '10px 0', padding: '10px', border: '1px solid #ccc', borderRadius: '5px' }}>\r\n                <strong>{asset.type}:</strong> {asset.details}\r\n                {asset.notes && <p>Notes: {asset.notes}</p>}\r\n                <div style={{ marginTop: '5px', display: 'flex', gap: 8 }}>\r\n                  <button onClick={() => startEdit(i)}>Edit</button>\r\n                  <button onClick={() => deleteAsset(i)}>Delete</button>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      ) : (\r\n        <div>\r\n          <p>Authenticate with biometrics to access your vault.</p>\r\n          <div style={{ marginTop: 8 }}>\r\n            <button onClick={() => {\r\n              try {\r\n                // If BiometricManager exists, ensure access is requested first when needed\r\n                if (tg?.BiometricManager) {\r\n                  const bm = tg.BiometricManager;\r\n                  if (!bm.isAccessGranted && typeof bm.requestAccess === 'function') {\r\n                    bm.requestAccess({ reason: 'Unlock your vault' }, (granted) => {\r\n                      if (granted) {\r\n                        authenticateBiometrics();\r\n                      } else {\r\n                        showAlert('Biometric access was not granted.');\r\n                      }\r\n                    });\r\n                    return;\r\n                  }\r\n                  // Otherwise call authenticate directly\r\n                  authenticateBiometrics();\r\n                  return;\r\n                }\r\n                showAlert('Biometric auth not available in this Telegram client. Try updating Telegram or enable Dev Mode to test.');\r\n              } catch (e) {\r\n                console.error('Authenticate button error', e);\r\n                showAlert('Failed to start biometric authentication.');\r\n              }\r\n            }}>Authenticate</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}