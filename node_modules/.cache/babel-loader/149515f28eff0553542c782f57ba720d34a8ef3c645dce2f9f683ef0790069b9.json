{"ast":null,"code":"import _objectSpread from\"C:/Users/Andre/dlv-lite-bot/dlb-lite-bot/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import CryptoJS from'crypto-js';// For AES encryption\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[tg,setTg]=useState(null);const[devMode,setDevMode]=useState(false);const[isAuthenticated,setIsAuthenticated]=useState(false);const[biometricToken,setBiometricToken]=useState('');const[assets,setAssets]=useState([]);const[newAsset,setNewAsset]=useState({type:'',details:'',notes:''});const[editingIndex,setEditingIndex]=useState(-1);const[lastAction,setLastAction]=useState('');const[lastError,setLastError]=useState('');// Helper to show alerts using Telegram SDK when available, or window.alert when not\nconst showAlert=msg=>{// Try Telegram showAlert, but fall back to window.alert and swallow WebAppMethodUnsupported\ntry{if(tg&&typeof tg.showAlert==='function'){try{tg.showAlert(msg);return;}catch(e){console.warn('tg.showAlert failed, falling back to window.alert',e);}}}catch(e){console.warn('showAlert wrapper unexpected error',e);}try{window.alert(msg);}catch(e){console.error('window.alert failed',e);}};// Safe wrappers for SecureStorage (fallback to localStorage if SecureStorage is unsupported)\nconst secureGetItem=(key,cb)=>{try{if(tg&&tg.SecureStorage&&typeof tg.SecureStorage.getItem==='function'){try{return tg.SecureStorage.getItem(key,cb);}catch(e){console.warn('tg.SecureStorage.getItem threw, falling back to localStorage',e);}}}catch(e){console.warn('secureGetItem unexpected error',e);}// async to mimic callback\nsetTimeout(()=>{try{const v=localStorage.getItem(key);cb(null,v);}catch(err){cb(err);}},0);};const secureSetItem=(key,value,cb)=>{try{if(tg&&tg.SecureStorage&&typeof tg.SecureStorage.setItem==='function'){try{return tg.SecureStorage.setItem(key,value,cb);}catch(e){console.warn('tg.SecureStorage.setItem threw, falling back to localStorage',e);}}}catch(e){console.warn('secureSetItem unexpected error',e);}setTimeout(()=>{try{localStorage.setItem(key,value);cb(null,true);}catch(err){cb(err,false);}},0);};// Promise-based helpers for SecureStorage to make async flows easier\nconst secureGetItemAsync=key=>{return new Promise((resolve,reject)=>{try{if(tg&&tg.SecureStorage&&typeof tg.SecureStorage.getItem==='function'){try{return tg.SecureStorage.getItem(key,(err,value)=>{if(err)return reject(err);resolve(value);});}catch(e){console.warn('tg.SecureStorage.getItem threw, falling back to localStorage',e);}}}catch(e){console.warn('secureGetItemAsync unexpected error',e);}try{const v=localStorage.getItem(key);resolve(v);}catch(err){reject(err);}});};const secureSetItemAsync=(key,value)=>{return new Promise((resolve,reject)=>{try{if(tg&&tg.SecureStorage&&typeof tg.SecureStorage.setItem==='function'){try{return tg.SecureStorage.setItem(key,value,(err,ok)=>{if(err)return reject(err);resolve(ok);});}catch(e){console.warn('tg.SecureStorage.setItem threw, falling back to localStorage',e);}}}catch(e){console.warn('secureSetItemAsync unexpected error',e);}try{localStorage.setItem(key,value);resolve(true);}catch(err){reject(err);}});};const safeHaptic=type=>{try{tg&&tg.HapticFeedback&&typeof tg.HapticFeedback.notificationOccurred==='function'&&tg.HapticFeedback.notificationOccurred(type);}catch(e){console.warn('HapticFeedback failed',e);}};const safeClose=()=>{try{tg&&typeof tg.close==='function'&&tg.close();}catch(e){console.warn('tg.close failed',e);}};// Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\nconst createFakeTelegram=()=>{const handlers={};return{themeParams:{bg_color:'#ffffff',text_color:'#000000'},ready:()=>{},expand:()=>{},onEvent:(name,cb)=>{handlers[name]=cb;},triggerEvent:(name,payload)=>{if(handlers[name])handlers[name](payload);},showAlert:text=>window.alert(text),close:()=>{},HapticFeedback:{notificationOccurred:t=>console.log('haptic',t)},SecureStorage:{getItem:(key,cb)=>{try{const v=localStorage.getItem(key);cb(null,v);}catch(e){cb(e);}},setItem:(key,value,cb)=>{try{localStorage.setItem(key,value);cb(null,true);}catch(e){cb(e,false);}}},BiometricManager:{isBiometricAvailable:true,isAccessGranted:false,init:cb=>cb&&cb(),requestAccess:(opts,cb)=>{// Simulate user granting access in dev mode\nsetTimeout(()=>cb&&cb(true),200);},authenticate:opts=>{// Simulate authentication success\nsetTimeout(()=>{const token='dev-biometric-token';setIsAuthenticated(true);setBiometricToken(token);loadAssetsWithToken(token);},200);}}};};// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(()=>{var _window$Telegram;// If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\ntry{const params=new URLSearchParams(window.location.search);if(params.get('dev')==='1')setDevMode(true);}catch(e){// ignore\n}const telegram=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:_window$Telegram.WebApp;if(telegram){setTg(telegram);telegram.ready();// Hide loading spinner\ntelegram.expand();// Full height\n// Theme adaptation\ndocument.body.style.backgroundColor=telegram.themeParams.bg_color;telegram.onEvent('themeChanged',()=>{document.body.style.backgroundColor=telegram.themeParams.bg_color;});// Validate initData (send to backend for HMAC check)\nvalidateInitData(telegram.initData);// Biometric setup\nconst biometric=telegram.BiometricManager;biometric.init(()=>{if(biometric.isBiometricAvailable&&!biometric.isAccessGranted){biometric.requestAccess({reason:'Secure your asset vault'},granted=>{if(granted){authenticateBiometrics();}});}else if(biometric.isAccessGranted){authenticateBiometrics();}});telegram.onEvent('biometricAuthRequested',event=>{setIsAuthenticated(event.isAuthenticated);if(event.isAuthenticated){setBiometricToken(event.biometricToken);// Load assets after auth\nloadAssets();}});}},[]);// When devMode is toggled on in a regular browser, create fake Telegram object\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(()=>{if(devMode&&!tg){const fake=createFakeTelegram();setTg(fake);// simulate immediate auth in dev mode for convenience\nconst token='dev-biometric-token';setIsAuthenticated(true);setBiometricToken(token);// load assets from localStorage\nloadAssetsWithToken(token);}},[devMode]);// Backend validation function (call your Vercel API)\nconst validateInitData=async initData=>{if(!tg)return;// Guard for local testing\ntry{const response=await fetch('/api/validate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({initData})});const{valid}=await response.json();if(!valid){showAlert('Invalid session! Please restart.');safeClose();}}catch(error){console.error('Validation failed',error);showAlert('Error validating session.');}};// Function to authenticate\nconst authenticateBiometrics=()=>{var _tg$BiometricManager;tg===null||tg===void 0?void 0:(_tg$BiometricManager=tg.BiometricManager)===null||_tg$BiometricManager===void 0?void 0:_tg$BiometricManager.authenticate({reason:'Unlock your vault'});};// Encryption function\n// Master-key based encryption: persist a master key in SecureStorage and use it to encrypt data\nconst MASTER_KEY_KEY='dlv_master_key_v1';const ensureMasterKey=async()=>{try{let mk=await secureGetItemAsync(MASTER_KEY_KEY).catch(()=>null);if(mk)return mk;// generate 32 bytes -> 256 bits master key, hex\nconst rand=CryptoJS.lib.WordArray.random(32).toString();await secureSetItemAsync(MASTER_KEY_KEY,rand);return rand;}catch(e){console.error('ensureMasterKey error',e);throw e;}};const getMasterKey=async()=>{let mk=await secureGetItemAsync(MASTER_KEY_KEY).catch(()=>null);if(!mk)mk=await ensureMasterKey();return mk;};const encryptData=async data=>{const mk=await getMasterKey();return CryptoJS.AES.encrypt(JSON.stringify(data),mk).toString();};const decryptData=async encrypted=>{const mk=await getMasterKey();try{const bytes=CryptoJS.AES.decrypt(encrypted,mk);const txt=bytes.toString(CryptoJS.enc.Utf8);return txt?JSON.parse(txt):null;}catch(e){console.error('decryptData error',e);throw e;}};// Load assets from SecureStorage using master key\nconst loadAssets=async()=>{try{const value=await secureGetItemAsync('dlv_assets').catch(()=>null);if(value){const decrypted=await decryptData(value).catch(()=>null);setAssets(decrypted||[]);}else{setAssets([]);}}catch(e){console.error('loadAssets error',e);showAlert('Error loading assets');setAssets([]);}};// In dev mode we still support loading with a token but prefer master key for persistence\nconst loadAssetsWithToken=async token=>{try{const value=await secureGetItemAsync('dlv_assets').catch(()=>null);if(value){try{// try decrypt with master key first\nconst decrypted=await decryptData(value).catch(()=>null);if(decrypted)return setAssets(decrypted);// fallback: try decrypting with provided token (dev mode)\nconst bytes=CryptoJS.AES.decrypt(value,token);const txt=bytes.toString(CryptoJS.enc.Utf8);setAssets(txt?JSON.parse(txt):[]);}catch(e){showAlert('Error loading assets');}}}catch(e){console.error('loadAssetsWithToken error',e);showAlert('Error loading assets');}};// Save assets\nconst saveAsset=async()=>{setLastError('');setLastAction('saveAsset');if(!tg){setLastError('Telegram API not available');return showAlert('Telegram API not available');}if(assets.length>=10){// Limit to 10\nsetLastError('Maximum assets reached');return showAlert('Maximum 10 assets allowed');}if(editingIndex>=0){// save edit\nconst updatedAssets=assets.map((a,i)=>i===editingIndex?newAsset:a);setEditingIndex(-1);try{setAssets(updatedAssets);setNewAsset({type:'',details:'',notes:''});try{const encrypted=await encryptData(updatedAssets);await secureSetItemAsync('dlv_assets',encrypted);safeHaptic('success');showAlert('Asset saved!');}catch(err){console.error('SecureStorage.setItem failed',err);setLastError(err?String(err):'setItem returned false');setAssets(assets);showAlert('Failed to save asset');}}catch(ex){console.error('saveAsset (edit) exception',ex);setLastError(String(ex));setAssets(assets);showAlert('Failed to save asset (exception)');}return;}const updatedAssets=[...assets,newAsset];// optimistic update so UI is responsive\ntry{setAssets(updatedAssets);setNewAsset({type:'',details:'',notes:''});try{const encrypted=await encryptData(updatedAssets);await secureSetItemAsync('dlv_assets',encrypted);safeHaptic('success');showAlert('Asset saved!');}catch(err){console.error('SecureStorage.setItem failed',err);setLastError(err?String(err):'setItem returned false');// revert optimistic update\nsetAssets(assets);showAlert('Failed to save asset');}}catch(ex){console.error('saveAsset exception',ex);setLastError(String(ex));setAssets(assets);showAlert('Failed to save asset (exception)');}};// Delete asset\nconst deleteAsset=async index=>{setLastError('');setLastAction('deleteAsset');if(!tg){setLastError('Telegram API not available');return showAlert('Telegram API not available');}const updatedAssets=assets.filter((_,i)=>i!==index);try{// optimistic\nconst prior=assets;setAssets(updatedAssets);try{const encrypted=await encryptData(updatedAssets);await secureSetItemAsync('dlv_assets',encrypted);showAlert('Asset deleted!');}catch(err){console.error('SecureStorage.setItem failed',err);setLastError(err?String(err):'setItem returned false');// revert\nsetAssets(prior);showAlert('Failed to delete asset');}}catch(ex){console.error('deleteAsset exception',ex);setLastError(String(ex));showAlert('Failed to delete asset (exception)');}};const startEdit=index=>{setEditingIndex(index);setNewAsset(assets[index]);window.scrollTo({top:0,behavior:'smooth'});};const cancelEdit=()=>{setEditingIndex(-1);setNewAsset({type:'',details:'',notes:''});};// If Telegram is not available, show a small UI to enable dev mode for local testing\nif(!tg){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:20},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Lite Digital Legacy Vault\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.\"}),/*#__PURE__*/_jsxs(\"label\",{style:{display:'block',marginBottom:10},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:devMode,onChange:e=>setDevMode(e.target.checked)}),\" Enable Dev Mode\"]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666'},children:\"Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px',color:tg.themeParams.text_color,backgroundColor:tg.themeParams.bg_color},children:[devMode&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#fff3bf',color:'#664d03',padding:'8px 12px',borderRadius:6,marginBottom:12,border:'1px solid #ffe58f'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dev Mode\"}),\" \\u2014 running with a simulated Telegram API. Data is stored in localStorage.\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>setDevMode(false),style:{float:'right',background:'transparent',border:'none',cursor:'pointer'},children:\"Dismiss\"})]}),devMode&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#f6f8fa',border:'1px solid #e1e4e8',padding:12,borderRadius:6,marginBottom:12,fontSize:13},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// simulate biometric auth in dev mode\nconst token='dev-biometric-token';setIsAuthenticated(true);setBiometricToken(token);loadAssetsWithToken(token);},style:{marginRight:8},children:\"Simulate Auth\"})})]}),/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:'pre-wrap',marginTop:8},children:JSON.stringify({devMode:!!devMode,tg:!!tg,isAuthenticated,biometricToken:biometricToken?'[redacted]':'',assetsLength:assets.length,lastAction,lastError},null,2)})]}),/*#__PURE__*/_jsx(\"h1\",{children:\"Lite Digital Legacy Vault\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Store and retrieve asset info securely (no passwords/seed phrases).\"}),isAuthenticated||devMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Asset\"}),/*#__PURE__*/_jsxs(\"select\",{value:newAsset.type,onChange:e=>setNewAsset(_objectSpread(_objectSpread({},newAsset),{},{type:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Asset Type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"crypto\",children:\"Crypto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"domain\",children:\"Domain\"}),/*#__PURE__*/_jsx(\"option\",{value:\"other\",children:\"Other\"})]}),/*#__PURE__*/_jsx(\"input\",{value:newAsset.details,onChange:e=>setNewAsset(_objectSpread(_objectSpread({},newAsset),{},{details:e.target.value})),placeholder:\"Details (e.g., wallet address)\",style:{width:'100%',margin:'10px 0',padding:'8px'}}),/*#__PURE__*/_jsx(\"textarea\",{value:newAsset.notes,onChange:e=>setNewAsset(_objectSpread(_objectSpread({},newAsset),{},{notes:e.target.value})),placeholder:\"Notes\",style:{width:'100%',margin:'10px 0',padding:'8px'}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveAsset,style:{padding:'10px 20px',margin:'10px 0'},children:editingIndex>=0?'Save Changes':'Add Asset'}),editingIndex>=0&&/*#__PURE__*/_jsx(\"button\",{onClick:cancelEdit,style:{padding:'10px 20px',margin:'10px 0'},children:\"Cancel\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Your Assets\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:assets.map((asset,i)=>/*#__PURE__*/_jsxs(\"li\",{style:{margin:'10px 0',padding:'10px',border:'1px solid #ccc',borderRadius:'5px'},children:[/*#__PURE__*/_jsxs(\"strong\",{children:[asset.type,\":\"]}),\" \",asset.details,asset.notes&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Notes: \",asset.notes]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'5px',display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEdit(i),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteAsset(i),children:\"Delete\"})]})]},i))})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Authenticate with biometrics to access your vault.\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:8},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{try{// If BiometricManager exists, ensure access is requested first when needed\nif(tg!==null&&tg!==void 0&&tg.BiometricManager){const bm=tg.BiometricManager;if(!bm.isAccessGranted&&typeof bm.requestAccess==='function'){bm.requestAccess({reason:'Unlock your vault'},granted=>{if(granted){authenticateBiometrics();}else{showAlert('Biometric access was not granted.');}});return;}// Otherwise call authenticate directly\nauthenticateBiometrics();return;}showAlert('Biometric auth not available in this Telegram client. Try updating Telegram or enable Dev Mode to test.');}catch(e){console.error('Authenticate button error',e);showAlert('Failed to start biometric authentication.');}},children:\"Authenticate\"})})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","CryptoJS","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","tg","setTg","devMode","setDevMode","isAuthenticated","setIsAuthenticated","biometricToken","setBiometricToken","assets","setAssets","newAsset","setNewAsset","type","details","notes","editingIndex","setEditingIndex","lastAction","setLastAction","lastError","setLastError","showAlert","msg","e","console","warn","window","alert","error","secureGetItem","key","cb","SecureStorage","getItem","setTimeout","v","localStorage","err","secureSetItem","value","setItem","secureGetItemAsync","Promise","resolve","reject","secureSetItemAsync","ok","safeHaptic","HapticFeedback","notificationOccurred","safeClose","close","createFakeTelegram","handlers","themeParams","bg_color","text_color","ready","expand","onEvent","name","triggerEvent","payload","text","t","log","BiometricManager","isBiometricAvailable","isAccessGranted","init","requestAccess","opts","authenticate","token","loadAssetsWithToken","_window$Telegram","params","URLSearchParams","location","search","get","telegram","Telegram","WebApp","document","body","style","backgroundColor","validateInitData","initData","biometric","reason","granted","authenticateBiometrics","event","loadAssets","fake","response","fetch","method","headers","JSON","stringify","valid","json","_tg$BiometricManager","MASTER_KEY_KEY","ensureMasterKey","mk","catch","rand","lib","WordArray","random","toString","getMasterKey","encryptData","data","AES","encrypt","decryptData","encrypted","bytes","decrypt","txt","enc","Utf8","parse","decrypted","saveAsset","length","updatedAssets","map","a","i","String","ex","deleteAsset","index","filter","_","prior","startEdit","scrollTo","top","behavior","cancelEdit","padding","children","display","marginBottom","checked","onChange","target","color","background","borderRadius","border","onClick","float","cursor","fontSize","justifyContent","alignItems","marginRight","whiteSpace","marginTop","assetsLength","_objectSpread","placeholder","width","margin","gap","listStyle","asset","bm"],"sources":["C:/Users/Andre/dlv-lite-bot/dlb-lite-bot/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CryptoJS from 'crypto-js'; // For AES encryption\r\n\r\nfunction App() {\r\n  const [tg, setTg] = useState(null);\r\n  const [devMode, setDevMode] = useState(false);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [biometricToken, setBiometricToken] = useState('');\r\n  const [assets, setAssets] = useState([]);\r\n  const [newAsset, setNewAsset] = useState({ type: '', details: '', notes: '' });\r\n  const [editingIndex, setEditingIndex] = useState(-1);\r\n  const [lastAction, setLastAction] = useState('');\r\n  const [lastError, setLastError] = useState('');\r\n\r\n  // Helper to show alerts using Telegram SDK when available, or window.alert when not\r\n  const showAlert = (msg) => {\r\n    // Try Telegram showAlert, but fall back to window.alert and swallow WebAppMethodUnsupported\r\n    try {\r\n      if (tg && typeof tg.showAlert === 'function') {\r\n        try {\r\n          tg.showAlert(msg);\r\n          return;\r\n        } catch (e) {\r\n          console.warn('tg.showAlert failed, falling back to window.alert', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('showAlert wrapper unexpected error', e);\r\n    }\r\n    try { window.alert(msg); } catch (e) { console.error('window.alert failed', e); }\r\n  };\r\n\r\n  // Safe wrappers for SecureStorage (fallback to localStorage if SecureStorage is unsupported)\r\n  const secureGetItem = (key, cb) => {\r\n    try {\r\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.getItem === 'function') {\r\n        try {\r\n          return tg.SecureStorage.getItem(key, cb);\r\n        } catch (e) {\r\n          console.warn('tg.SecureStorage.getItem threw, falling back to localStorage', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('secureGetItem unexpected error', e);\r\n    }\r\n    // async to mimic callback\r\n    setTimeout(() => {\r\n      try {\r\n        const v = localStorage.getItem(key);\r\n        cb(null, v);\r\n      } catch (err) {\r\n        cb(err);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  const secureSetItem = (key, value, cb) => {\r\n    try {\r\n      if (tg && tg.SecureStorage && typeof tg.SecureStorage.setItem === 'function') {\r\n        try {\r\n          return tg.SecureStorage.setItem(key, value, cb);\r\n        } catch (e) {\r\n          console.warn('tg.SecureStorage.setItem threw, falling back to localStorage', e);\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn('secureSetItem unexpected error', e);\r\n    }\r\n    setTimeout(() => {\r\n      try {\r\n        localStorage.setItem(key, value);\r\n        cb(null, true);\r\n      } catch (err) {\r\n        cb(err, false);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Promise-based helpers for SecureStorage to make async flows easier\r\n  const secureGetItemAsync = (key) => {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        if (tg && tg.SecureStorage && typeof tg.SecureStorage.getItem === 'function') {\r\n          try {\r\n            return tg.SecureStorage.getItem(key, (err, value) => {\r\n              if (err) return reject(err);\r\n              resolve(value);\r\n            });\r\n          } catch (e) {\r\n            console.warn('tg.SecureStorage.getItem threw, falling back to localStorage', e);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('secureGetItemAsync unexpected error', e);\r\n      }\r\n      try {\r\n        const v = localStorage.getItem(key);\r\n        resolve(v);\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  const secureSetItemAsync = (key, value) => {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        if (tg && tg.SecureStorage && typeof tg.SecureStorage.setItem === 'function') {\r\n          try {\r\n            return tg.SecureStorage.setItem(key, value, (err, ok) => {\r\n              if (err) return reject(err);\r\n              resolve(ok);\r\n            });\r\n          } catch (e) {\r\n            console.warn('tg.SecureStorage.setItem threw, falling back to localStorage', e);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('secureSetItemAsync unexpected error', e);\r\n      }\r\n      try {\r\n        localStorage.setItem(key, value);\r\n        resolve(true);\r\n      } catch (err) {\r\n        reject(err);\r\n      }\r\n    });\r\n  };\r\n\r\n  const safeHaptic = (type) => {\r\n    try {\r\n      tg && tg.HapticFeedback && typeof tg.HapticFeedback.notificationOccurred === 'function' && tg.HapticFeedback.notificationOccurred(type);\r\n    } catch (e) {\r\n      console.warn('HapticFeedback failed', e);\r\n    }\r\n  };\r\n\r\n  const safeClose = () => {\r\n    try { tg && typeof tg.close === 'function' && tg.close(); } catch (e) { console.warn('tg.close failed', e); }\r\n  };\r\n\r\n  // Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\r\n  const createFakeTelegram = () => {\r\n    const handlers = {};\r\n    return {\r\n      themeParams: { bg_color: '#ffffff', text_color: '#000000' },\r\n      ready: () => {},\r\n      expand: () => {},\r\n      onEvent: (name, cb) => {\r\n        handlers[name] = cb;\r\n      },\r\n      triggerEvent: (name, payload) => {\r\n        if (handlers[name]) handlers[name](payload);\r\n      },\r\n      showAlert: (text) => window.alert(text),\r\n      close: () => {},\r\n      HapticFeedback: { notificationOccurred: (t) => console.log('haptic', t) },\r\n      SecureStorage: {\r\n        getItem: (key, cb) => {\r\n          try {\r\n            const v = localStorage.getItem(key);\r\n            cb(null, v);\r\n          } catch (e) {\r\n            cb(e);\r\n          }\r\n        },\r\n        setItem: (key, value, cb) => {\r\n          try {\r\n            localStorage.setItem(key, value);\r\n            cb(null, true);\r\n          } catch (e) {\r\n            cb(e, false);\r\n          }\r\n        },\r\n      },\r\n      BiometricManager: {\r\n        isBiometricAvailable: true,\r\n        isAccessGranted: false,\r\n        init: (cb) => cb && cb(),\r\n        requestAccess: (opts, cb) => {\r\n          // Simulate user granting access in dev mode\r\n          setTimeout(() => cb && cb(true), 200);\r\n        },\r\n        authenticate: (opts) => {\r\n          // Simulate authentication success\r\n          setTimeout(() => {\r\n            const token = 'dev-biometric-token';\r\n            setIsAuthenticated(true);\r\n            setBiometricToken(token);\r\n            loadAssetsWithToken(token);\r\n          }, 200);\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    // If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\r\n    try {\r\n      const params = new URLSearchParams(window.location.search);\r\n      if (params.get('dev') === '1') setDevMode(true);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n\r\n    const telegram = window.Telegram?.WebApp;\r\n    if (telegram) {\r\n      setTg(telegram);\r\n      telegram.ready(); // Hide loading spinner\r\n      telegram.expand(); // Full height\r\n      // Theme adaptation\r\n      document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      telegram.onEvent('themeChanged', () => {\r\n        document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      });\r\n\r\n      // Validate initData (send to backend for HMAC check)\r\n      validateInitData(telegram.initData);\r\n\r\n      // Biometric setup\r\n      const biometric = telegram.BiometricManager;\r\n      biometric.init(() => {\r\n        if (biometric.isBiometricAvailable && !biometric.isAccessGranted) {\r\n          biometric.requestAccess({ reason: 'Secure your asset vault' }, (granted) => {\r\n            if (granted) {\r\n              authenticateBiometrics();\r\n            }\r\n          });\r\n        } else if (biometric.isAccessGranted) {\r\n          authenticateBiometrics();\r\n        }\r\n      });\r\n\r\n      telegram.onEvent('biometricAuthRequested', (event) => {\r\n        setIsAuthenticated(event.isAuthenticated);\r\n        if (event.isAuthenticated) {\r\n          setBiometricToken(event.biometricToken);\r\n          // Load assets after auth\r\n          loadAssets();\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // When devMode is toggled on in a regular browser, create fake Telegram object\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => {\r\n    if (devMode && !tg) {\r\n      const fake = createFakeTelegram();\r\n      setTg(fake);\r\n      // simulate immediate auth in dev mode for convenience\r\n      const token = 'dev-biometric-token';\r\n      setIsAuthenticated(true);\r\n      setBiometricToken(token);\r\n      // load assets from localStorage\r\n      loadAssetsWithToken(token);\r\n    }\r\n  }, [devMode]);\r\n\r\n  // Backend validation function (call your Vercel API)\r\n  const validateInitData = async (initData) => {\r\n    if (!tg) return; // Guard for local testing\r\n    try {\r\n      const response = await fetch('/api/validate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ initData }),\r\n      });\r\n      const { valid } = await response.json();\r\n      if (!valid) {\r\n        showAlert('Invalid session! Please restart.');\r\n        safeClose();\r\n      }\r\n    } catch (error) {\r\n      console.error('Validation failed', error);\r\n      showAlert('Error validating session.');\r\n    }\r\n  };\r\n\r\n  // Function to authenticate\r\n  const authenticateBiometrics = () => {\r\n    tg?.BiometricManager?.authenticate({ reason: 'Unlock your vault' });\r\n  };\r\n\r\n  // Encryption function\r\n  // Master-key based encryption: persist a master key in SecureStorage and use it to encrypt data\r\n  const MASTER_KEY_KEY = 'dlv_master_key_v1';\r\n\r\n  const ensureMasterKey = async () => {\r\n    try {\r\n      let mk = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\r\n      if (mk) return mk;\r\n      // generate 32 bytes -> 256 bits master key, hex\r\n      const rand = CryptoJS.lib.WordArray.random(32).toString();\r\n      await secureSetItemAsync(MASTER_KEY_KEY, rand);\r\n      return rand;\r\n    } catch (e) {\r\n      console.error('ensureMasterKey error', e);\r\n      throw e;\r\n    }\r\n  };\r\n\r\n  const getMasterKey = async () => {\r\n    let mk = await secureGetItemAsync(MASTER_KEY_KEY).catch(() => null);\r\n    if (!mk) mk = await ensureMasterKey();\r\n    return mk;\r\n  };\r\n\r\n  const encryptData = async (data) => {\r\n    const mk = await getMasterKey();\r\n    return CryptoJS.AES.encrypt(JSON.stringify(data), mk).toString();\r\n  };\r\n\r\n  const decryptData = async (encrypted) => {\r\n    const mk = await getMasterKey();\r\n    try {\r\n      const bytes = CryptoJS.AES.decrypt(encrypted, mk);\r\n      const txt = bytes.toString(CryptoJS.enc.Utf8);\r\n      return txt ? JSON.parse(txt) : null;\r\n    } catch (e) {\r\n      console.error('decryptData error', e);\r\n      throw e;\r\n    }\r\n  };\r\n\r\n  // Load assets from SecureStorage using master key\r\n  const loadAssets = async () => {\r\n    try {\r\n      const value = await secureGetItemAsync('dlv_assets').catch(() => null);\r\n      if (value) {\r\n        const decrypted = await decryptData(value).catch(() => null);\r\n        setAssets(decrypted || []);\r\n      } else {\r\n        setAssets([]);\r\n      }\r\n    } catch (e) {\r\n      console.error('loadAssets error', e);\r\n      showAlert('Error loading assets');\r\n      setAssets([]);\r\n    }\r\n  };\r\n\r\n  // In dev mode we still support loading with a token but prefer master key for persistence\r\n  const loadAssetsWithToken = async (token) => {\r\n    try {\r\n      const value = await secureGetItemAsync('dlv_assets').catch(() => null);\r\n      if (value) {\r\n        try {\r\n          // try decrypt with master key first\r\n          const decrypted = await decryptData(value).catch(() => null);\r\n          if (decrypted) return setAssets(decrypted);\r\n          // fallback: try decrypting with provided token (dev mode)\r\n          const bytes = CryptoJS.AES.decrypt(value, token);\r\n          const txt = bytes.toString(CryptoJS.enc.Utf8);\r\n          setAssets(txt ? JSON.parse(txt) : []);\r\n        } catch (e) {\r\n          showAlert('Error loading assets');\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('loadAssetsWithToken error', e);\r\n      showAlert('Error loading assets');\r\n    }\r\n  };\r\n\r\n  // Save assets\r\n  const saveAsset = async () => {\r\n    setLastError('');\r\n    setLastAction('saveAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    if (assets.length >= 10) { // Limit to 10\r\n      setLastError('Maximum assets reached');\r\n      return showAlert('Maximum 10 assets allowed');\r\n    }\r\n  if (editingIndex >= 0) {\r\n      // save edit\r\n      const updatedAssets = assets.map((a, i) => i === editingIndex ? newAsset : a);\r\n      setEditingIndex(-1);\r\n      try {\r\n        setAssets(updatedAssets);\r\n        setNewAsset({ type: '', details: '', notes: '' });\r\n        try {\r\n          const encrypted = await encryptData(updatedAssets);\r\n          await secureSetItemAsync('dlv_assets', encrypted);\r\n          safeHaptic('success');\r\n          showAlert('Asset saved!');\r\n        } catch (err) {\r\n          console.error('SecureStorage.setItem failed', err);\r\n          setLastError(err ? String(err) : 'setItem returned false');\r\n          setAssets(assets);\r\n          showAlert('Failed to save asset');\r\n        }\r\n      } catch (ex) {\r\n        console.error('saveAsset (edit) exception', ex);\r\n        setLastError(String(ex));\r\n        setAssets(assets);\r\n        showAlert('Failed to save asset (exception)');\r\n      }\r\n      return;\r\n    }\r\n    const updatedAssets = [...assets, newAsset];\r\n    // optimistic update so UI is responsive\r\n    try {\r\n      setAssets(updatedAssets);\r\n      setNewAsset({ type: '', details: '', notes: '' });\r\n      try {\r\n        const encrypted = await encryptData(updatedAssets);\r\n        await secureSetItemAsync('dlv_assets', encrypted);\r\n        safeHaptic('success');\r\n        showAlert('Asset saved!');\r\n      } catch (err) {\r\n        console.error('SecureStorage.setItem failed', err);\r\n        setLastError(err ? String(err) : 'setItem returned false');\r\n        // revert optimistic update\r\n        setAssets(assets);\r\n        showAlert('Failed to save asset');\r\n      }\r\n    } catch (ex) {\r\n      console.error('saveAsset exception', ex);\r\n      setLastError(String(ex));\r\n      setAssets(assets);\r\n      showAlert('Failed to save asset (exception)');\r\n    }\r\n  };\r\n\r\n  // Delete asset\r\n  const deleteAsset = async (index) => {\r\n    setLastError('');\r\n    setLastAction('deleteAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    const updatedAssets = assets.filter((_, i) => i !== index);\r\n    try {\r\n      // optimistic\r\n      const prior = assets;\r\n      setAssets(updatedAssets);\r\n      try {\r\n        const encrypted = await encryptData(updatedAssets);\r\n        await secureSetItemAsync('dlv_assets', encrypted);\r\n        showAlert('Asset deleted!');\r\n      } catch (err) {\r\n        console.error('SecureStorage.setItem failed', err);\r\n        setLastError(err ? String(err) : 'setItem returned false');\r\n        // revert\r\n        setAssets(prior);\r\n        showAlert('Failed to delete asset');\r\n      }\r\n    } catch (ex) {\r\n      console.error('deleteAsset exception', ex);\r\n      setLastError(String(ex));\r\n      showAlert('Failed to delete asset (exception)');\r\n    }\r\n  };\r\n\r\n  const startEdit = (index) => {\r\n    setEditingIndex(index);\r\n    setNewAsset(assets[index]);\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingIndex(-1);\r\n    setNewAsset({ type: '', details: '', notes: '' });\r\n  };\r\n\r\n  // If Telegram is not available, show a small UI to enable dev mode for local testing\r\n  if (!tg) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h1>Lite Digital Legacy Vault</h1>\r\n        <p>Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.</p>\r\n        <label style={{ display: 'block', marginBottom: 10 }}>\r\n          <input type=\"checkbox\" checked={devMode} onChange={(e) => setDevMode(e.target.checked)} /> Enable Dev Mode\r\n        </label>\r\n        <p style={{ color: '#666' }}>\r\n          Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px', color: tg.themeParams.text_color, backgroundColor: tg.themeParams.bg_color }}>\r\n      {devMode && (\r\n        <div style={{ background: '#fff3bf', color: '#664d03', padding: '8px 12px', borderRadius: 6, marginBottom: 12, border: '1px solid #ffe58f' }}>\r\n          <strong>Dev Mode</strong> — running with a simulated Telegram API. Data is stored in localStorage.\r\n          <button onClick={() => setDevMode(false)} style={{ float: 'right', background: 'transparent', border: 'none', cursor: 'pointer' }}>Dismiss</button>\r\n        </div>\r\n      )}\r\n      {devMode && (\r\n        <div style={{ background: '#f6f8fa', border: '1px solid #e1e4e8', padding: 12, borderRadius: 6, marginBottom: 12, fontSize: 13 }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <strong>Debug</strong>\r\n            <div>\r\n              <button onClick={() => {\r\n                // simulate biometric auth in dev mode\r\n                const token = 'dev-biometric-token';\r\n                setIsAuthenticated(true);\r\n                setBiometricToken(token);\r\n                loadAssetsWithToken(token);\r\n              }} style={{ marginRight: 8 }}>Simulate Auth</button>\r\n            </div>\r\n          </div>\r\n          <pre style={{ whiteSpace: 'pre-wrap', marginTop: 8 }}>\r\n{JSON.stringify({ devMode: !!devMode, tg: !!tg, isAuthenticated, biometricToken: biometricToken ? '[redacted]' : '', assetsLength: assets.length, lastAction, lastError }, null, 2)}\r\n          </pre>\r\n        </div>\r\n      )}\r\n      <h1>Lite Digital Legacy Vault</h1>\r\n      <p>Store and retrieve asset info securely (no passwords/seed phrases).</p>\r\n  {(isAuthenticated || devMode) ? (\r\n        <>\r\n          <h2>Add New Asset</h2>\r\n          <select value={newAsset.type} onChange={(e) => setNewAsset({ ...newAsset, type: e.target.value })}>\r\n            <option value=\"\">Asset Type</option>\r\n            <option value=\"crypto\">Crypto</option>\r\n            <option value=\"domain\">Domain</option>\r\n            <option value=\"other\">Other</option>\r\n          </select>\r\n          <input\r\n            value={newAsset.details}\r\n            onChange={(e) => setNewAsset({ ...newAsset, details: e.target.value })}\r\n            placeholder=\"Details (e.g., wallet address)\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <textarea\r\n            value={newAsset.notes}\r\n            onChange={(e) => setNewAsset({ ...newAsset, notes: e.target.value })}\r\n            placeholder=\"Notes\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\r\n            <button onClick={saveAsset} style={{ padding: '10px 20px', margin: '10px 0' }}>{editingIndex >= 0 ? 'Save Changes' : 'Add Asset'}</button>\r\n            {editingIndex >= 0 && <button onClick={cancelEdit} style={{ padding: '10px 20px', margin: '10px 0' }}>Cancel</button>}\r\n          </div>\r\n          <h2>Your Assets</h2>\r\n          <ul style={{ listStyle: 'none', padding: 0 }}>\r\n            {assets.map((asset, i) => (\r\n              <li key={i} style={{ margin: '10px 0', padding: '10px', border: '1px solid #ccc', borderRadius: '5px' }}>\r\n                <strong>{asset.type}:</strong> {asset.details}\r\n                {asset.notes && <p>Notes: {asset.notes}</p>}\r\n                <div style={{ marginTop: '5px', display: 'flex', gap: 8 }}>\r\n                  <button onClick={() => startEdit(i)}>Edit</button>\r\n                  <button onClick={() => deleteAsset(i)}>Delete</button>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      ) : (\r\n        <div>\r\n          <p>Authenticate with biometrics to access your vault.</p>\r\n          <div style={{ marginTop: 8 }}>\r\n            <button onClick={() => {\r\n              try {\r\n                // If BiometricManager exists, ensure access is requested first when needed\r\n                if (tg?.BiometricManager) {\r\n                  const bm = tg.BiometricManager;\r\n                  if (!bm.isAccessGranted && typeof bm.requestAccess === 'function') {\r\n                    bm.requestAccess({ reason: 'Unlock your vault' }, (granted) => {\r\n                      if (granted) {\r\n                        authenticateBiometrics();\r\n                      } else {\r\n                        showAlert('Biometric access was not granted.');\r\n                      }\r\n                    });\r\n                    return;\r\n                  }\r\n                  // Otherwise call authenticate directly\r\n                  authenticateBiometrics();\r\n                  return;\r\n                }\r\n                showAlert('Biometric auth not available in this Telegram client. Try updating Telegram or enable Dev Mode to test.');\r\n              } catch (e) {\r\n                console.error('Authenticate button error', e);\r\n                showAlert('Failed to start biometric authentication.');\r\n              }\r\n            }}>Authenticate</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}