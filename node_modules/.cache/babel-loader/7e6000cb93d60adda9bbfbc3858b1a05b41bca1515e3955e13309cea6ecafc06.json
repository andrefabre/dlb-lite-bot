{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andre\\\\dlv-lite-bot\\\\dlb-lite-bot\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport CryptoJS from 'crypto-js'; // For AES encryption\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [tg, setTg] = useState(null);\n  const [devMode, setDevMode] = useState(false);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [biometricToken, setBiometricToken] = useState('');\n  const [assets, setAssets] = useState([]);\n  const [newAsset, setNewAsset] = useState({\n    type: '',\n    details: '',\n    notes: ''\n  });\n  const [lastAction, setLastAction] = useState('');\n  const [lastError, setLastError] = useState('');\n\n  // Helper to show alerts using Telegram SDK when available, or window.alert when not\n  const showAlert = msg => {\n    if (tg && typeof tg.showAlert === 'function') return tg.showAlert(msg);\n    return window.alert(msg);\n  };\n\n  // Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\n  const createFakeTelegram = () => {\n    const handlers = {};\n    const storageKey = 'dlv_assets';\n    return {\n      themeParams: {\n        bg_color: '#ffffff',\n        text_color: '#000000'\n      },\n      ready: () => {},\n      expand: () => {},\n      onEvent: (name, cb) => {\n        handlers[name] = cb;\n      },\n      triggerEvent: (name, payload) => {\n        if (handlers[name]) handlers[name](payload);\n      },\n      showAlert: text => window.alert(text),\n      close: () => {},\n      HapticFeedback: {\n        notificationOccurred: t => console.log('haptic', t)\n      },\n      SecureStorage: {\n        getItem: (key, cb) => {\n          try {\n            const v = localStorage.getItem(key);\n            cb(null, v);\n          } catch (e) {\n            cb(e);\n          }\n        },\n        setItem: (key, value, cb) => {\n          try {\n            localStorage.setItem(key, value);\n            cb(null, true);\n          } catch (e) {\n            cb(e, false);\n          }\n        }\n      },\n      BiometricManager: {\n        isBiometricAvailable: true,\n        isAccessGranted: false,\n        init: cb => cb && cb(),\n        requestAccess: (opts, cb) => {\n          // Simulate user granting access in dev mode\n          setTimeout(() => cb && cb(true), 200);\n        },\n        authenticate: opts => {\n          // Simulate authentication success\n          setTimeout(() => {\n            const token = 'dev-biometric-token';\n            setIsAuthenticated(true);\n            setBiometricToken(token);\n            loadAssetsWithToken(token);\n          }, 200);\n        }\n      }\n    };\n  };\n  useEffect(() => {\n    var _window$Telegram;\n    // If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\n    try {\n      const params = new URLSearchParams(window.location.search);\n      if (params.get('dev') === '1') setDevMode(true);\n    } catch (e) {\n      // ignore\n    }\n    const telegram = (_window$Telegram = window.Telegram) === null || _window$Telegram === void 0 ? void 0 : _window$Telegram.WebApp;\n    if (telegram) {\n      setTg(telegram);\n      telegram.ready(); // Hide loading spinner\n      telegram.expand(); // Full height\n      // Theme adaptation\n      document.body.style.backgroundColor = telegram.themeParams.bg_color;\n      telegram.onEvent('themeChanged', () => {\n        document.body.style.backgroundColor = telegram.themeParams.bg_color;\n      });\n\n      // Validate initData (send to backend for HMAC check)\n      validateInitData(telegram.initData);\n\n      // Biometric setup\n      const biometric = telegram.BiometricManager;\n      biometric.init(() => {\n        if (biometric.isBiometricAvailable && !biometric.isAccessGranted) {\n          biometric.requestAccess({\n            reason: 'Secure your asset vault'\n          }, granted => {\n            if (granted) {\n              authenticateBiometrics();\n            }\n          });\n        } else if (biometric.isAccessGranted) {\n          authenticateBiometrics();\n        }\n      });\n      telegram.onEvent('biometricAuthRequested', event => {\n        setIsAuthenticated(event.isAuthenticated);\n        if (event.isAuthenticated) {\n          setBiometricToken(event.biometricToken);\n          // Load assets after auth\n          loadAssets();\n        }\n      });\n    }\n  }, []);\n\n  // When devMode is toggled on in a regular browser, create fake Telegram object\n  useEffect(() => {\n    if (devMode && !tg) {\n      const fake = createFakeTelegram();\n      setTg(fake);\n      // simulate immediate auth in dev mode for convenience\n      const token = 'dev-biometric-token';\n      setIsAuthenticated(true);\n      setBiometricToken(token);\n      // load assets from localStorage\n      loadAssetsWithToken(token);\n    }\n  }, [devMode]);\n\n  // Backend validation function (call your Vercel API)\n  const validateInitData = async initData => {\n    if (!tg) return; // Guard for local testing\n    try {\n      const response = await fetch('/api/validate', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          initData\n        })\n      });\n      const {\n        valid\n      } = await response.json();\n      if (!valid) {\n        showAlert('Invalid session! Please restart.');\n        tg.close && tg.close();\n      }\n    } catch (error) {\n      console.error('Validation failed', error);\n      showAlert('Error validating session.');\n    }\n  };\n\n  // Function to authenticate\n  const authenticateBiometrics = () => {\n    var _tg$BiometricManager;\n    tg === null || tg === void 0 ? void 0 : (_tg$BiometricManager = tg.BiometricManager) === null || _tg$BiometricManager === void 0 ? void 0 : _tg$BiometricManager.authenticate({\n      reason: 'Unlock your vault'\n    });\n  };\n\n  // Encryption function\n  const encryptData = (data, key = biometricToken) => {\n    return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();\n  };\n\n  // Decryption\n  const decryptData = (encrypted, key = biometricToken) => {\n    const bytes = CryptoJS.AES.decrypt(encrypted, key);\n    return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n  };\n\n  // Load assets from SecureStorage using current biometric key\n  const loadAssets = () => {\n    if (!tg) return;\n    tg.SecureStorage.getItem('dlv_assets', (err, value) => {\n      if (!err && value) {\n        try {\n          const decrypted = decryptData(value);\n          setAssets(decrypted);\n        } catch (e) {\n          showAlert('Error loading assets');\n        }\n      }\n    });\n  };\n\n  // Helper to load assets with a specific token (used in dev mode)\n  const loadAssetsWithToken = token => {\n    if (!tg) return;\n    tg.SecureStorage.getItem('dlv_assets', (err, value) => {\n      if (!err && value) {\n        try {\n          const decrypted = decryptData(value, token);\n          setAssets(decrypted);\n        } catch (e) {\n          showAlert('Error loading assets');\n        }\n      }\n    });\n  };\n\n  // Save assets\n  const saveAsset = () => {\n    setLastError('');\n    setLastAction('saveAsset');\n    if (!tg) {\n      setLastError('Telegram API not available');\n      return showAlert('Telegram API not available');\n    }\n    if (assets.length >= 10) {\n      // Limit to 10\n      setLastError('Maximum assets reached');\n      return showAlert('Maximum 10 assets allowed');\n    }\n    const updatedAssets = [...assets, newAsset];\n    // optimistic update so UI is responsive\n    try {\n      setAssets(updatedAssets);\n      setNewAsset({\n        type: '',\n        details: '',\n        notes: ''\n      });\n      const encrypted = encryptData(updatedAssets);\n      tg.SecureStorage.setItem('dlv_assets', encrypted, (err, success) => {\n        if (err || !success) {\n          console.error('SecureStorage.setItem failed', err);\n          setLastError(err ? String(err) : 'setItem returned false');\n          // revert optimistic update\n          setAssets(assets);\n          showAlert('Failed to save asset');\n        } else {\n          tg.HapticFeedback && tg.HapticFeedback.notificationOccurred && tg.HapticFeedback.notificationOccurred('success');\n          showAlert('Asset saved!');\n        }\n      });\n    } catch (ex) {\n      console.error('saveAsset exception', ex);\n      setLastError(String(ex));\n      setAssets(assets);\n      showAlert('Failed to save asset (exception)');\n    }\n  };\n\n  // Delete asset\n  const deleteAsset = index => {\n    setLastError('');\n    setLastAction('deleteAsset');\n    if (!tg) {\n      setLastError('Telegram API not available');\n      return showAlert('Telegram API not available');\n    }\n    const updatedAssets = assets.filter((_, i) => i !== index);\n    try {\n      // optimistic\n      const prior = assets;\n      setAssets(updatedAssets);\n      const encrypted = encryptData(updatedAssets);\n      tg.SecureStorage.setItem('dlv_assets', encrypted, (err, success) => {\n        if (err || !success) {\n          console.error('SecureStorage.setItem failed', err);\n          setLastError(err ? String(err) : 'setItem returned false');\n          // revert\n          setAssets(prior);\n          showAlert('Failed to delete asset');\n        } else {\n          showAlert('Asset deleted!');\n        }\n      });\n    } catch (ex) {\n      console.error('deleteAsset exception', ex);\n      setLastError(String(ex));\n      showAlert('Failed to delete asset (exception)');\n    }\n  };\n\n  // If Telegram is not available, show a small UI to enable dev mode for local testing\n  if (!tg) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Lite Digital Legacy Vault\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: devMode,\n          onChange: e => setDevMode(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), \" Enable Dev Mode\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: '#666'\n        },\n        children: \"Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      color: tg.themeParams.text_color,\n      backgroundColor: tg.themeParams.bg_color\n    },\n    children: [devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff3bf',\n        color: '#664d03',\n        padding: '8px 12px',\n        borderRadius: 6,\n        marginBottom: 12,\n        border: '1px solid #ffe58f'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Dev Mode\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this), \" \\u2014 running with a simulated Telegram API. Data is stored in localStorage.\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setDevMode(false),\n        style: {\n          float: 'right',\n          background: 'transparent',\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: \"Dismiss\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }, this), devMode && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#f6f8fa',\n        border: '1px solid #e1e4e8',\n        padding: 12,\n        borderRadius: 6,\n        marginBottom: 12,\n        fontSize: 13\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Debug\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              // simulate biometric auth in dev mode\n              const token = 'dev-biometric-token';\n              setIsAuthenticated(true);\n              setBiometricToken(token);\n              loadAssetsWithToken(token);\n            },\n            style: {\n              marginRight: 8\n            },\n            children: \"Simulate Auth\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        style: {\n          whiteSpace: 'pre-wrap',\n          marginTop: 8\n        },\n        children: JSON.stringify({\n          devMode: !!devMode,\n          tg: !!tg,\n          isAuthenticated,\n          biometricToken: biometricToken ? '[redacted]' : '',\n          assetsLength: assets.length,\n          lastAction,\n          lastError\n        }, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Lite Digital Legacy Vault\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Store and retrieve asset info securely (no passwords/seed phrases).\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 7\n    }, this), isAuthenticated || devMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Add New Asset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: newAsset.type,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          type: e.target.value\n        }),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\",\n          children: \"Asset Type\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"crypto\",\n          children: \"Crypto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"domain\",\n          children: \"Domain\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"other\",\n          children: \"Other\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: newAsset.details,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          details: e.target.value\n        }),\n        placeholder: \"Details (e.g., wallet address)\",\n        style: {\n          width: '100%',\n          margin: '10px 0',\n          padding: '8px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        value: newAsset.notes,\n        onChange: e => setNewAsset({\n          ...newAsset,\n          notes: e.target.value\n        }),\n        placeholder: \"Notes\",\n        style: {\n          width: '100%',\n          margin: '10px 0',\n          padding: '8px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: saveAsset,\n        style: {\n          padding: '10px 20px',\n          margin: '10px 0'\n        },\n        children: \"Add Asset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Your Assets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0\n        },\n        children: assets.map((asset, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            margin: '10px 0',\n            padding: '10px',\n            border: '1px solid #ccc',\n            borderRadius: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [asset.type, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 17\n          }, this), \" \", asset.details, asset.notes && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Notes: \", asset.notes]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => deleteAsset(i),\n            style: {\n              marginTop: '5px'\n            },\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Authenticate with biometrics to access your vault.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"puhpqo1+QeEzJf/kC0a4RMQHg9U=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","CryptoJS","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","tg","setTg","devMode","setDevMode","isAuthenticated","setIsAuthenticated","biometricToken","setBiometricToken","assets","setAssets","newAsset","setNewAsset","type","details","notes","lastAction","setLastAction","lastError","setLastError","showAlert","msg","window","alert","createFakeTelegram","handlers","storageKey","themeParams","bg_color","text_color","ready","expand","onEvent","name","cb","triggerEvent","payload","text","close","HapticFeedback","notificationOccurred","t","console","log","SecureStorage","getItem","key","v","localStorage","e","setItem","value","BiometricManager","isBiometricAvailable","isAccessGranted","init","requestAccess","opts","setTimeout","authenticate","token","loadAssetsWithToken","_window$Telegram","params","URLSearchParams","location","search","get","telegram","Telegram","WebApp","document","body","style","backgroundColor","validateInitData","initData","biometric","reason","granted","authenticateBiometrics","event","loadAssets","fake","response","fetch","method","headers","JSON","stringify","valid","json","error","_tg$BiometricManager","encryptData","data","AES","encrypt","toString","decryptData","encrypted","bytes","decrypt","parse","enc","Utf8","err","decrypted","saveAsset","length","updatedAssets","success","String","ex","deleteAsset","index","filter","_","i","prior","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","display","marginBottom","checked","onChange","target","color","background","borderRadius","border","onClick","float","cursor","fontSize","justifyContent","alignItems","marginRight","whiteSpace","marginTop","assetsLength","placeholder","width","margin","listStyle","map","asset","_c","$RefreshReg$"],"sources":["C:/Users/Andre/dlv-lite-bot/dlb-lite-bot/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CryptoJS from 'crypto-js'; // For AES encryption\r\n\r\nfunction App() {\r\n  const [tg, setTg] = useState(null);\r\n  const [devMode, setDevMode] = useState(false);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [biometricToken, setBiometricToken] = useState('');\r\n  const [assets, setAssets] = useState([]);\r\n  const [newAsset, setNewAsset] = useState({ type: '', details: '', notes: '' });\r\n  const [lastAction, setLastAction] = useState('');\r\n  const [lastError, setLastError] = useState('');\r\n\r\n  // Helper to show alerts using Telegram SDK when available, or window.alert when not\r\n  const showAlert = (msg) => {\r\n    if (tg && typeof tg.showAlert === 'function') return tg.showAlert(msg);\r\n    return window.alert(msg);\r\n  };\r\n\r\n  // Create a simple fake Telegram WebApp for local dev mode so UI can be tested in a browser.\r\n  const createFakeTelegram = () => {\r\n    const handlers = {};\r\n    const storageKey = 'dlv_assets';\r\n    return {\r\n      themeParams: { bg_color: '#ffffff', text_color: '#000000' },\r\n      ready: () => {},\r\n      expand: () => {},\r\n      onEvent: (name, cb) => {\r\n        handlers[name] = cb;\r\n      },\r\n      triggerEvent: (name, payload) => {\r\n        if (handlers[name]) handlers[name](payload);\r\n      },\r\n      showAlert: (text) => window.alert(text),\r\n      close: () => {},\r\n      HapticFeedback: { notificationOccurred: (t) => console.log('haptic', t) },\r\n      SecureStorage: {\r\n        getItem: (key, cb) => {\r\n          try {\r\n            const v = localStorage.getItem(key);\r\n            cb(null, v);\r\n          } catch (e) {\r\n            cb(e);\r\n          }\r\n        },\r\n        setItem: (key, value, cb) => {\r\n          try {\r\n            localStorage.setItem(key, value);\r\n            cb(null, true);\r\n          } catch (e) {\r\n            cb(e, false);\r\n          }\r\n        },\r\n      },\r\n      BiometricManager: {\r\n        isBiometricAvailable: true,\r\n        isAccessGranted: false,\r\n        init: (cb) => cb && cb(),\r\n        requestAccess: (opts, cb) => {\r\n          // Simulate user granting access in dev mode\r\n          setTimeout(() => cb && cb(true), 200);\r\n        },\r\n        authenticate: (opts) => {\r\n          // Simulate authentication success\r\n          setTimeout(() => {\r\n            const token = 'dev-biometric-token';\r\n            setIsAuthenticated(true);\r\n            setBiometricToken(token);\r\n            loadAssetsWithToken(token);\r\n          }, 200);\r\n        },\r\n      },\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    // If URL contains ?dev=1 enable devMode automatically (useful on deployed preview)\r\n    try {\r\n      const params = new URLSearchParams(window.location.search);\r\n      if (params.get('dev') === '1') setDevMode(true);\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n\r\n    const telegram = window.Telegram?.WebApp;\r\n    if (telegram) {\r\n      setTg(telegram);\r\n      telegram.ready(); // Hide loading spinner\r\n      telegram.expand(); // Full height\r\n      // Theme adaptation\r\n      document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      telegram.onEvent('themeChanged', () => {\r\n        document.body.style.backgroundColor = telegram.themeParams.bg_color;\r\n      });\r\n\r\n      // Validate initData (send to backend for HMAC check)\r\n      validateInitData(telegram.initData);\r\n\r\n      // Biometric setup\r\n      const biometric = telegram.BiometricManager;\r\n      biometric.init(() => {\r\n        if (biometric.isBiometricAvailable && !biometric.isAccessGranted) {\r\n          biometric.requestAccess({ reason: 'Secure your asset vault' }, (granted) => {\r\n            if (granted) {\r\n              authenticateBiometrics();\r\n            }\r\n          });\r\n        } else if (biometric.isAccessGranted) {\r\n          authenticateBiometrics();\r\n        }\r\n      });\r\n\r\n      telegram.onEvent('biometricAuthRequested', (event) => {\r\n        setIsAuthenticated(event.isAuthenticated);\r\n        if (event.isAuthenticated) {\r\n          setBiometricToken(event.biometricToken);\r\n          // Load assets after auth\r\n          loadAssets();\r\n        }\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // When devMode is toggled on in a regular browser, create fake Telegram object\r\n  useEffect(() => {\r\n    if (devMode && !tg) {\r\n      const fake = createFakeTelegram();\r\n      setTg(fake);\r\n      // simulate immediate auth in dev mode for convenience\r\n      const token = 'dev-biometric-token';\r\n      setIsAuthenticated(true);\r\n      setBiometricToken(token);\r\n      // load assets from localStorage\r\n      loadAssetsWithToken(token);\r\n    }\r\n  }, [devMode]);\r\n\r\n  // Backend validation function (call your Vercel API)\r\n  const validateInitData = async (initData) => {\r\n    if (!tg) return; // Guard for local testing\r\n    try {\r\n      const response = await fetch('/api/validate', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ initData }),\r\n      });\r\n      const { valid } = await response.json();\r\n      if (!valid) {\r\n        showAlert('Invalid session! Please restart.');\r\n        tg.close && tg.close();\r\n      }\r\n    } catch (error) {\r\n      console.error('Validation failed', error);\r\n      showAlert('Error validating session.');\r\n    }\r\n  };\r\n\r\n  // Function to authenticate\r\n  const authenticateBiometrics = () => {\r\n    tg?.BiometricManager?.authenticate({ reason: 'Unlock your vault' });\r\n  };\r\n\r\n  // Encryption function\r\n  const encryptData = (data, key = biometricToken) => {\r\n    return CryptoJS.AES.encrypt(JSON.stringify(data), key).toString();\r\n  };\r\n\r\n  // Decryption\r\n  const decryptData = (encrypted, key = biometricToken) => {\r\n    const bytes = CryptoJS.AES.decrypt(encrypted, key);\r\n    return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n  };\r\n\r\n  // Load assets from SecureStorage using current biometric key\r\n  const loadAssets = () => {\r\n    if (!tg) return;\r\n    tg.SecureStorage.getItem('dlv_assets', (err, value) => {\r\n      if (!err && value) {\r\n        try {\r\n          const decrypted = decryptData(value);\r\n          setAssets(decrypted);\r\n        } catch (e) {\r\n          showAlert('Error loading assets');\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // Helper to load assets with a specific token (used in dev mode)\r\n  const loadAssetsWithToken = (token) => {\r\n    if (!tg) return;\r\n    tg.SecureStorage.getItem('dlv_assets', (err, value) => {\r\n      if (!err && value) {\r\n        try {\r\n          const decrypted = decryptData(value, token);\r\n          setAssets(decrypted);\r\n        } catch (e) {\r\n          showAlert('Error loading assets');\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  // Save assets\r\n  const saveAsset = () => {\r\n    setLastError('');\r\n    setLastAction('saveAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    if (assets.length >= 10) { // Limit to 10\r\n      setLastError('Maximum assets reached');\r\n      return showAlert('Maximum 10 assets allowed');\r\n    }\r\n    const updatedAssets = [...assets, newAsset];\r\n    // optimistic update so UI is responsive\r\n    try {\r\n      setAssets(updatedAssets);\r\n      setNewAsset({ type: '', details: '', notes: '' });\r\n      const encrypted = encryptData(updatedAssets);\r\n      tg.SecureStorage.setItem('dlv_assets', encrypted, (err, success) => {\r\n        if (err || !success) {\r\n          console.error('SecureStorage.setItem failed', err);\r\n          setLastError(err ? String(err) : 'setItem returned false');\r\n          // revert optimistic update\r\n          setAssets(assets);\r\n          showAlert('Failed to save asset');\r\n        } else {\r\n          tg.HapticFeedback && tg.HapticFeedback.notificationOccurred && tg.HapticFeedback.notificationOccurred('success');\r\n          showAlert('Asset saved!');\r\n        }\r\n      });\r\n    } catch (ex) {\r\n      console.error('saveAsset exception', ex);\r\n      setLastError(String(ex));\r\n      setAssets(assets);\r\n      showAlert('Failed to save asset (exception)');\r\n    }\r\n  };\r\n\r\n  // Delete asset\r\n  const deleteAsset = (index) => {\r\n    setLastError('');\r\n    setLastAction('deleteAsset');\r\n    if (!tg) {\r\n      setLastError('Telegram API not available');\r\n      return showAlert('Telegram API not available');\r\n    }\r\n    const updatedAssets = assets.filter((_, i) => i !== index);\r\n    try {\r\n      // optimistic\r\n      const prior = assets;\r\n      setAssets(updatedAssets);\r\n      const encrypted = encryptData(updatedAssets);\r\n      tg.SecureStorage.setItem('dlv_assets', encrypted, (err, success) => {\r\n        if (err || !success) {\r\n          console.error('SecureStorage.setItem failed', err);\r\n          setLastError(err ? String(err) : 'setItem returned false');\r\n          // revert\r\n          setAssets(prior);\r\n          showAlert('Failed to delete asset');\r\n        } else {\r\n          showAlert('Asset deleted!');\r\n        }\r\n      });\r\n    } catch (ex) {\r\n      console.error('deleteAsset exception', ex);\r\n      setLastError(String(ex));\r\n      showAlert('Failed to delete asset (exception)');\r\n    }\r\n  };\r\n\r\n  // If Telegram is not available, show a small UI to enable dev mode for local testing\r\n  if (!tg) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h1>Lite Digital Legacy Vault</h1>\r\n        <p>Your app is not running inside Telegram. To test the UI in this browser, enable Dev Mode below.</p>\r\n        <label style={{ display: 'block', marginBottom: 10 }}>\r\n          <input type=\"checkbox\" checked={devMode} onChange={(e) => setDevMode(e.target.checked)} /> Enable Dev Mode\r\n        </label>\r\n        <p style={{ color: '#666' }}>\r\n          Dev Mode uses localStorage (encrypted with a temporary dev token) to simulate Telegram SecureStorage and biometrics.\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px', color: tg.themeParams.text_color, backgroundColor: tg.themeParams.bg_color }}>\r\n      {devMode && (\r\n        <div style={{ background: '#fff3bf', color: '#664d03', padding: '8px 12px', borderRadius: 6, marginBottom: 12, border: '1px solid #ffe58f' }}>\r\n          <strong>Dev Mode</strong> — running with a simulated Telegram API. Data is stored in localStorage.\r\n          <button onClick={() => setDevMode(false)} style={{ float: 'right', background: 'transparent', border: 'none', cursor: 'pointer' }}>Dismiss</button>\r\n        </div>\r\n      )}\r\n      {devMode && (\r\n        <div style={{ background: '#f6f8fa', border: '1px solid #e1e4e8', padding: 12, borderRadius: 6, marginBottom: 12, fontSize: 13 }}>\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <strong>Debug</strong>\r\n            <div>\r\n              <button onClick={() => {\r\n                // simulate biometric auth in dev mode\r\n                const token = 'dev-biometric-token';\r\n                setIsAuthenticated(true);\r\n                setBiometricToken(token);\r\n                loadAssetsWithToken(token);\r\n              }} style={{ marginRight: 8 }}>Simulate Auth</button>\r\n            </div>\r\n          </div>\r\n          <pre style={{ whiteSpace: 'pre-wrap', marginTop: 8 }}>\r\n{JSON.stringify({ devMode: !!devMode, tg: !!tg, isAuthenticated, biometricToken: biometricToken ? '[redacted]' : '', assetsLength: assets.length, lastAction, lastError }, null, 2)}\r\n          </pre>\r\n        </div>\r\n      )}\r\n      <h1>Lite Digital Legacy Vault</h1>\r\n      <p>Store and retrieve asset info securely (no passwords/seed phrases).</p>\r\n  {(isAuthenticated || devMode) ? (\r\n        <>\r\n          <h2>Add New Asset</h2>\r\n          <select value={newAsset.type} onChange={(e) => setNewAsset({ ...newAsset, type: e.target.value })}>\r\n            <option value=\"\">Asset Type</option>\r\n            <option value=\"crypto\">Crypto</option>\r\n            <option value=\"domain\">Domain</option>\r\n            <option value=\"other\">Other</option>\r\n          </select>\r\n          <input\r\n            value={newAsset.details}\r\n            onChange={(e) => setNewAsset({ ...newAsset, details: e.target.value })}\r\n            placeholder=\"Details (e.g., wallet address)\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <textarea\r\n            value={newAsset.notes}\r\n            onChange={(e) => setNewAsset({ ...newAsset, notes: e.target.value })}\r\n            placeholder=\"Notes\"\r\n            style={{ width: '100%', margin: '10px 0', padding: '8px' }}\r\n          />\r\n          <button onClick={saveAsset} style={{ padding: '10px 20px', margin: '10px 0' }}>Add Asset</button>\r\n          <h2>Your Assets</h2>\r\n          <ul style={{ listStyle: 'none', padding: 0 }}>\r\n            {assets.map((asset, i) => (\r\n              <li key={i} style={{ margin: '10px 0', padding: '10px', border: '1px solid #ccc', borderRadius: '5px' }}>\r\n                <strong>{asset.type}:</strong> {asset.details}\r\n                {asset.notes && <p>Notes: {asset.notes}</p>}\r\n                <button onClick={() => deleteAsset(i)} style={{ marginTop: '5px' }}>Delete</button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      ) : (\r\n        <p>Authenticate with biometrics to access your vault.</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}